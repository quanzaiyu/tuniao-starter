var _wx_uni=uni||wx,sessionStorage=window&&window.sessionStorage?window.sessionStorage:{setItem:function(t,e){void 0!==_wx_uni?_wx_uni.setStorageSync(t,e):"undefined"!=typeof my&&my.setStorageSync({key:t,data:e})},getItem:function(t){var e=void 0;return void 0!==_wx_uni?e=_wx_uni.getStorageSync(t):"undefined"!=typeof my&&(e=my.getStorageSync({key:t}).data),e}},localStorage=window&&window.localStorage?window.localStorage:{setItem:function(t,e){void 0!==_wx_uni?_wx_uni.setStorageSync(t,e):"undefined"!=typeof my&&my.setStorageSync({key:t,data:e})},getItem:function(t){var e=void 0;return void 0!==_wx_uni?e=_wx_uni.getStorageSync(t):"undefined"!=typeof my&&(e=my.getStorageSync({key:t}).data),e}};function WebSocketGlue(...t){const e=this;this.url=t[0]||"",this.options=t[2]||{},"undefined"!=typeof my?(my.connectSocket({url:this.url,...this.options,success:t=>{console.log("connect success: "),console.log(t)},fail:t=>{console.log("connect fail"),console.log(t)}}),my.onSocketClose((t=>{console.log("my onSocketClose"),console.log(t),e.onclose&&e.onclose({reason:t})})),my.onSocketMessage((t=>{e.onmessage&&e.onmessage(t)})),my.onSocketError((t=>{console.log("my onSocketError"),console.log(t),e.onerror&&this.onerror(t)})),my.onSocketOpen((()=>{console.log("my SocketOpen"),e.onopen&&e.onopen()}))):void 0!==_wx_uni&&(this.SocketTask=_wx_uni.connectSocket({url:this.url,...this.options,success:()=>{}}),this.SocketTask.onClose(((t,n)=>{e.onclose&&e.onclose({code:t,reason:n})})),this.SocketTask.onMessage((t=>{e.onmessage&&e.onmessage(t)})),this.SocketTask.onError((t=>{e.onerror&&e.onerror(t)})),this.SocketTask.onOpen((()=>{e.onopen&&e.onopen()})))}WebSocketGlue.prototype.close=function(){"undefined"!=typeof my?my.closeSocket():void 0!==_wx_uni&&this.SocketTask&&this.SocketTask.close()},WebSocketGlue.prototype.send=function(t){"undefined"!=typeof my?my.sendSocketMessage({data:t}):void 0!==_wx_uni&&this.SocketTask&&this.SocketTask.send({data:t})};var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,atob=atob||function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!b64re.test(t))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");t+="==".slice(2-(3&t.length));for(var e,n,r,i="",o=0;o<t.length;)e=b64.indexOf(t.charAt(o++))<<18|b64.indexOf(t.charAt(o++))<<12|(n=b64.indexOf(t.charAt(o++)))<<6|(r=b64.indexOf(t.charAt(o++))),i+=64===n?String.fromCharCode(e>>16&255):64===r?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return i},navigator=navigator||{userAgent:"Language/zh_CN MicroMessenger/6.6.1.1220(0x26060135) NetType/4G Language/zh_CN miniProgram"},window=window||{WebSocket:WebSocketGlue,navigator,atob,sessionStorage,localStorage},MersenneTwister=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};MersenneTwister.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){const e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},MersenneTwister.prototype.init_by_array=function(t,e){let n,r,i;for(this.init_seed(19650218),n=1,r=0,i=this.N>e?this.N:e;i;i--){const i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+t[r]+r,this.mt[n]>>>=0,n++,r++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=e&&(r=0)}for(i=this.N-1;i;i--){const t=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&t)>>>16)<<16)+1566083941*(65535&t))-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},MersenneTwister.prototype.random_int=function(){let t;const e=[0,this.MATRIX_A];if(this.mti>=this.N){let n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^e[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0},MersenneTwister.prototype.random=function(){return this.random_int()*(1/4294967296)};const twister=new MersenneTwister(Math.random()*Number.MAX_SAFE_INTEGER);function randomFloat(){return twister.random()}var crypto=window&&window.crypto?window.crypto:{getRandomValues(t){let e=t.length;for(;e--;)t[e]=Math.floor(256*randomFloat());return t}};!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AliyunInteraction=e():t.AliyunInteraction=e()}(self,(()=>(()=>{var t={889:(t,e,n)=>{"use strict";
/*!{id:msgpack.codec.js,ver:1.05,license:"MIT",author:"uupaa.js@gmail.com"}*/var r=n(48);function i(t,e,n){t.byteLength;for(var r=0,i=n.length;r<i;r++){var o=n.charCodeAt(r);if(o<128)t.setUint8(e++,o>>>0&127|0);else if(o<2048)t.setUint8(e++,o>>>6&31|192),t.setUint8(e++,o>>>0&63|128);else if(o<65536)t.setUint8(e++,o>>>12&15|224),t.setUint8(e++,o>>>6&63|128),t.setUint8(e++,o>>>0&63|128);else{if(!(o<1114112))throw new Error("bad codepoint "+o);t.setUint8(e++,o>>>18&7|240),t.setUint8(e++,o>>>12&63|128),t.setUint8(e++,o>>>6&63|128),t.setUint8(e++,o>>>0&63|128)}}}function o(t,e,n){var i="",o=t.buffer.slice(e,e+n);if(void 0!==o){if("undefined"!=typeof TextDecoder)try{i=new TextDecoder("utf-8",{fatal:!0}).decode(o)}catch(t){}if(""===i)try{i=new r.TextDecoder("utf-8",{fatal:!0}).decode(o)}catch(t){}}return i||o}function u(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);if(i<128)e+=1;else if(i<2048)e+=2;else if(i<65536)e+=3;else{if(!(i<1114112))throw new Error("bad codepoint "+i);e+=4}}return e}function s(t,e,n){this.offset=e||0,this.view=t,this.bytes=n}function a(t,e,n){var r=typeof t;if("string"===r){if((o=u(t))<32)return e.setUint8(n,160|o),i(e,n+1,t),1+o;if(o<65536)return e.setUint8(n,218),e.setUint16(n+1,o),i(e,n+3,t),3+o;if(o<4294967296)return e.setUint8(n,219),e.setUint32(n+1,o),i(e,n+5,t),5+o}if(t instanceof ArrayBuffer){if((o=t.byteLength)<65536)return e.setUint8(n,216),e.setUint16(n+1,o),new Uint8Array(e.buffer).set(new Uint8Array(t),n+3),3+o;if(o<4294967296)return e.setUint8(n,217),e.setUint32(n+1,o),new Uint8Array(e.buffer).set(new Uint8Array(t),n+5),5+o}if("number"===r){if(t<<0!==t)return e.setUint8(n,203),e.setFloat64(n+1,t),9;if(t>=0){if(t<128)return e.setUint8(n,t),1;if(t<256)return e.setUint8(n,204),e.setUint8(n+1,t),2;if(t<65536)return e.setUint8(n,205),e.setUint16(n+1,t),3;if(t<4294967296)return e.setUint8(n,206),e.setUint32(n+1,t),5;throw new Error("Number too big 0x"+t.toString(16))}if(t>=-32)return e.setInt8(n,t),1;if(t>=-128)return e.setUint8(n,208),e.setInt8(n+1,t),2;if(t>=-32768)return e.setUint8(n,209),e.setInt16(n+1,t),3;if(t>=-2147483648)return e.setUint8(n,210),e.setInt32(n+1,t),5;throw new Error("Number too small -0x"+(-t).toString(16).substr(1))}if("undefined"===r)return e.setUint8(n,196),1;if(null===t)return e.setUint8(n,192),1;if("boolean"===r)return e.setUint8(n,t?195:194),1;if("object"===r){var o,s=0,c=Array.isArray(t);if(c)o=t.length;else{var f=Object.keys(t);o=f.length}if(o<16?(e.setUint8(n,o|(c?144:128)),s=1):o<65536?(e.setUint8(n,c?220:222),e.setUint16(n+1,o),s=3):o<4294967296&&(e.setUint8(n,c?221:223),e.setUint32(n+1,o),s=5),c)for(var l=0;l<o;l++)s+=a(t[l],e,n+s);else for(l=0;l<o;l++){var h=f[l];s+=a(h,e,n+s),s+=a(t[h],e,n+s)}return s}throw new Error("Unknown type "+r)}function c(t){var e=typeof t;if("string"===e){if((n=u(t))<32)return 1+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(t instanceof ArrayBuffer){if((n=t.byteLength)<65536)return 3+n;if(n<4294967296)return 5+n}if("number"===e){if(t<<0!==t)return 9;if(t>=0){if(t<128)return 1;if(t<256)return 2;if(t<65536)return 3;if(t<4294967296)return 5;if(t<0x10000000000000000)return 9;throw new Error("Number too big 0x"+t.toString(16))}if(t>=-32)return 1;if(t>=-128)return 2;if(t>=-32768)return 3;if(t>=-2147483648)return 5;if(t>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+t.toString(16).substr(1))}if("boolean"===e||"undefined"===e||null===t)return 1;if("object"===e){var n,r=0;if(Array.isArray(t)){n=t.length;for(var i=0;i<n;i++)r+=c(t[i])}else{var o=Object.keys(t);n=o.length;for(i=0;i<n;i++){var s=o[i];r+=c(s)+c(t[s])}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}throw new Error("Unknown type "+e)}e.inspect=function(t){if(void 0===t)return"undefined";var e,n;t instanceof ArrayBuffer?(n="ArrayBuffer",e=new DataView(t)):t instanceof DataView&&(n="DataView",e=t);if(!e)return JSON.stringify(t);for(var r=[],i=0;i<t.byteLength;i++){if(i>20){r.push("...");break}var o=e.getUint8(i).toString(16);1===o.length&&(o="0"+o),r.push(o)}return"<"+n+" "+r.join(" ")+">"},e.utf8Write=i,e.utf8Read=o,e.utf8ByteCount=u,e.encode=function(t){var e=new ArrayBuffer(c(t));return a(t,new DataView(e),0),e},e.decode=function(t){var e=t.buffer,n=new s(new DataView(e),0,t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},s.prototype.map=function(t){for(var e={},n=0;n<t;n++){e[this.parse()]=this.parse()}return e},s.prototype.buf=function(t){var e=new ArrayBuffer(t);return new Uint8Array(e).set(new Uint8Array(this.view.buffer,this.offset,t),0),this.offset+=t,e},s.prototype.raw=function(t){var e=o(this.view,this.offset,t);return this.offset+=t,e},s.prototype.array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.parse();return e},s.prototype.parse=function(){var t,e,n=this.view.getUint8(this.offset);if(160==(224&n))return e=31&n,this.offset++,this.raw(e);if(128==(240&n))return e=15&n,this.offset++,this.map(e);if(144==(240&n))return e=15&n,this.offset++,this.array(e);if(0==(128&n))return this.offset++,n;if(224==(224&n))return t=this.view.getInt8(this.offset),this.offset++,t;switch(n){case 218:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.raw(e);case 219:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.raw(e);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return void this.offset++;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 211:return t=this.view.getBigInt64?this.view.getBigInt64(this.offset+1):4294967296*this.view.getInt32(this.offset+1)+this.view.getUint32(this.offset+5),this.offset+=9,t;case 222:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.map(e);case 223:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.map(e);case 220:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.array(e);case 221:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.array(e);case 216:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.buf(e);case 217:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.buf(e);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t;case 207:var r=this.bytes;return this.offset++,4294967296*(16777216*r[this.offset++]+(r[this.offset++]<<16)+(r[this.offset++]<<8)+r[this.offset++])+16777216*r[this.offset++]+(r[this.offset++]<<16)+(r[this.offset++]<<8)+r[this.offset++]}throw new Error("Unknown type 0x"+n.toString(16))};var f=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),l=String.fromCharCode,h=function(t){var e=t.length,n=e%4,r=(e>0?f[t.charAt(0)]<<18:0)|(e>1?f[t.charAt(1)]<<12:0)|(e>2?f[t.charAt(2)]<<6:0)|(e>3?f[t.charAt(3)]:0),i=[l(r>>>16),l(r>>>8&255),l(255&r)];return i.length-=[0,0,2,1][n],i.join("")},p=void 0!==window&&window.atob?function(t){return window.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,h)};e.decodeFromB64=function(t){for(var n=p(t),r=n.length,i=new Uint8Array(r),o=0;o<r;o++){var u=n.charCodeAt(o);i[o]=u}return e.decode(i)}},48:(t,e,n)=>{var r=n(672);t.exports={TextEncoder:r.TextEncoder,TextDecoder:r.TextDecoder}},672:function(t){!function(e){"use strict";function n(t,e,n){return e<=t&&t<=n}Math.floor;function r(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}var i=-1;function o(t){this.tokens=[].slice.call(t),this.tokens.reverse()}o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():i},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.pop());else this.tokens.push(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.shift());else this.tokens.unshift(t)}};var u=-1;function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}function a(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(c,t)?c[t]:null}var c={};[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"}].forEach((function(t){t.encodings.forEach((function(t){t.labels.forEach((function(e){c[e]=t}))}))}));var f={},l={},h="utf-8";function p(t,e){if(!(this instanceof p))throw TypeError("Called as a function. Did you forget 'new'?");t=void 0!==t?String(t):h,e=r(e),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=a(t);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!l[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");var i=this;return i._encoding=n,Boolean(e.fatal)&&(i._error_mode="fatal"),Boolean(e.ignoreBOM)&&(i._ignoreBOM=!0),Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase(),this.fatal="fatal"===i._error_mode,this.ignoreBOM=i._ignoreBOM),i}function v(t,n){if(!(this instanceof v))throw TypeError("Called as a function. Did you forget 'new'?");n=r(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var i=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var o=a(t=void 0!==t?String(t):h);if(null===o||"replacement"===o.name)throw RangeError("Unknown encoding: "+t);if(!f[o.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");i._encoding=o}else i._encoding=a("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase()),i}function g(t){var e=t.fatal,r=0,o=0,a=0,c=128,f=191;this.handler=function(t,l){if(l===i&&0!==a)return a=0,s(e);if(l===i)return u;if(0===a){if(n(l,0,127))return l;if(n(l,194,223))a=1,r=31&l;else if(n(l,224,239))224===l&&(c=160),237===l&&(f=159),a=2,r=15&l;else{if(!n(l,240,244))return s(e);240===l&&(c=144),244===l&&(f=143),a=3,r=7&l}return null}if(!n(l,c,f))return r=a=o=0,c=128,f=191,t.prepend(l),s(e);if(c=128,f=191,r=r<<6|63&l,(o+=1)!==a)return null;var h=r;return r=a=o=0,h}}function d(t){t.fatal;this.handler=function(t,e){if(e===i)return u;if(n(e,0,127))return e;var r,o;n(e,128,2047)?(r=1,o=192):n(e,2048,65535)?(r=2,o=224):n(e,65536,1114111)&&(r=3,o=240);for(var s=[(e>>6*r)+o];r>0;){var a=e>>6*(r-1);s.push(128|63&a),r-=1}return s}}Object.defineProperty&&(Object.defineProperty(p.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(p.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(p.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),p.prototype.decode=function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=r(e),this._do_not_flush||(this._decoder=l[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(e.stream);for(var s,a=new o(n),c=[];;){var f=a.read();if(f===i)break;if((s=this._decoder.handler(a,f))===u)break;null!==s&&(Array.isArray(s)?c.push.apply(c,s):c.push(s))}if(!this._do_not_flush){do{if((s=this._decoder.handler(a,a.read()))===u)break;null!==s&&(Array.isArray(s)?c.push.apply(c,s):c.push(s))}while(!a.endOfStream());this._decoder=null}return function(t){var e,n;return e=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===e.indexOf(n)||this._ignoreBOM||this._BOMseen||(t.length>0&&65279===t[0]?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(t)}.call(this,c)},Object.defineProperty&&Object.defineProperty(v.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),v.prototype.encode=function(t,e){t=t?String(t):"",e=r(e),this._do_not_flush||(this._encoder=f[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(e.stream);for(var n,s=new o(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var u=t.charCodeAt(r+1);if(56320<=u&&u<=57343){var s=1023&o,a=1023&u;i.push(65536+(s<<10)+a),r+=1}else i.push(65533)}r+=1}return i}(t)),a=[];;){var c=s.read();if(c===i)break;if((n=this._encoder.handler(s,c))===u)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(s,s.read()))!==u;)Array.isArray(n)?a.push.apply(a,n):a.push(n);this._encoder=null}return new Uint8Array(a)},f["UTF-8"]=function(t){return new d(t)},l["UTF-8"]=function(t){return new g(t)},e.TextEncoder||(e.TextEncoder=v),e.TextDecoder||(e.TextDecoder=p),t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder})}(this||{})},204:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,n)}(t,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,u,c;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),u=o[e]),void 0===u)u=o[e]=n,++t._eventsCount;else if("function"==typeof u?u=o[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(i=a(t))>0&&u.length>i&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=u.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var u;if(e.length>0&&(u=e[0]),u instanceof Error)throw u;var s=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw s.context=u,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)r(a,this,e);else{var c=a.length,f=v(a,c);for(n=0;n<c;++n)r(f[n],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,u;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){u=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,u||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return h(this,t,!0)},o.prototype.rawListeners=function(t){return h(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},392:function(t,e,n){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */t=n.nmd(t),function(){var i,o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,l="__lodash_placeholder__",h=1,p=2,v=4,g=1,d=2,y=1,_=2,m=4,w=8,b=16,S=32,E=64,C=128,I=256,L=512,O=30,A="...",N=800,T=16,j=1,x=2,M=1/0,U=9007199254740991,k=17976931348623157e292,R=NaN,P=4294967295,D=P-1,G=P>>>1,B=[["ary",C],["bind",y],["bindKey",_],["curry",w],["curryRight",b],["flip",L],["partial",S],["partialRight",E],["rearg",I]],F="[object Arguments]",W="[object Array]",H="[object AsyncFunction]",z="[object Boolean]",V="[object Date]",K="[object DOMException]",$="[object Error]",q="[object Function]",J="[object GeneratorFunction]",Z="[object Map]",Q="[object Number]",Y="[object Null]",X="[object Object]",tt="[object Promise]",et="[object Proxy]",nt="[object RegExp]",rt="[object Set]",it="[object String]",ot="[object Symbol]",ut="[object Undefined]",st="[object WeakMap]",at="[object WeakSet]",ct="[object ArrayBuffer]",ft="[object DataView]",lt="[object Float32Array]",ht="[object Float64Array]",pt="[object Int8Array]",vt="[object Int16Array]",gt="[object Int32Array]",dt="[object Uint8Array]",yt="[object Uint8ClampedArray]",_t="[object Uint16Array]",mt="[object Uint32Array]",wt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,St=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Et=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,It=RegExp(Et.source),Lt=RegExp(Ct.source),Ot=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Nt=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(Mt.source),kt=/^\s+/,Rt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,Gt=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ft=/[()=,{}\[\]\/\s]/,Wt=/\\(\\)?/g,Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zt=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Kt=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ee="\\u2700-\\u27bf",ne="a-z\\xdf-\\xf6\\xf8-\\xff",re="A-Z\\xc0-\\xd6\\xd8-\\xde",ie="\\ufe0e\\ufe0f",oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ue="['’]",se="["+Xt+"]",ae="["+oe+"]",ce="["+te+"]",fe="\\d+",le="["+ee+"]",he="["+ne+"]",pe="[^"+Xt+oe+fe+ee+ne+re+"]",ve="\\ud83c[\\udffb-\\udfff]",ge="[^"+Xt+"]",de="(?:\\ud83c[\\udde6-\\uddff]){2}",ye="[\\ud800-\\udbff][\\udc00-\\udfff]",_e="["+re+"]",me="\\u200d",we="(?:"+he+"|"+pe+")",be="(?:"+_e+"|"+pe+")",Se="(?:['’](?:d|ll|m|re|s|t|ve))?",Ee="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ce="(?:"+ce+"|"+ve+")"+"?",Ie="["+ie+"]?",Le=Ie+Ce+("(?:"+me+"(?:"+[ge,de,ye].join("|")+")"+Ie+Ce+")*"),Oe="(?:"+[le,de,ye].join("|")+")"+Le,Ae="(?:"+[ge+ce+"?",ce,de,ye,se].join("|")+")",Ne=RegExp(ue,"g"),Te=RegExp(ce,"g"),je=RegExp(ve+"(?="+ve+")|"+Ae+Le,"g"),xe=RegExp([_e+"?"+he+"+"+Se+"(?="+[ae,_e,"$"].join("|")+")",be+"+"+Ee+"(?="+[ae,_e+we,"$"].join("|")+")",_e+"?"+we+"+"+Se,_e+"+"+Ee,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fe,Oe].join("|"),"g"),Me=RegExp("["+me+Xt+te+ie+"]"),Ue=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Re=-1,Pe={};Pe[lt]=Pe[ht]=Pe[pt]=Pe[vt]=Pe[gt]=Pe[dt]=Pe[yt]=Pe[_t]=Pe[mt]=!0,Pe[F]=Pe[W]=Pe[ct]=Pe[z]=Pe[ft]=Pe[V]=Pe[$]=Pe[q]=Pe[Z]=Pe[Q]=Pe[X]=Pe[nt]=Pe[rt]=Pe[it]=Pe[st]=!1;var De={};De[F]=De[W]=De[ct]=De[ft]=De[z]=De[V]=De[lt]=De[ht]=De[pt]=De[vt]=De[gt]=De[Z]=De[Q]=De[X]=De[nt]=De[rt]=De[it]=De[ot]=De[dt]=De[yt]=De[_t]=De[mt]=!0,De[$]=De[q]=De[st]=!1;var Ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=parseFloat,Fe=parseInt,We="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,He="object"==typeof self&&self&&self.Object===Object&&self,ze=We||He||Function("return this")(),Ve=e&&!e.nodeType&&e,Ke=Ve&&t&&!t.nodeType&&t,$e=Ke&&Ke.exports===Ve,qe=$e&&We.process,Je=function(){try{var t=Ke&&Ke.require&&Ke.require("util").types;return t||qe&&qe.binding&&qe.binding("util")}catch(t){}}(),Ze=Je&&Je.isArrayBuffer,Qe=Je&&Je.isDate,Ye=Je&&Je.isMap,Xe=Je&&Je.isRegExp,tn=Je&&Je.isSet,en=Je&&Je.isTypedArray;function nn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function rn(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var u=t[i];e(r,u,n(u),t)}return r}function on(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function un(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function sn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function an(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var u=t[n];e(u,n,t)&&(o[i++]=u)}return o}function cn(t,e){return!!(null==t?0:t.length)&&mn(t,e,0)>-1}function fn(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ln(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function hn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function pn(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function vn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function gn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var dn=En("length");function yn(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function _n(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function mn(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):_n(t,bn,n)}function wn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function bn(t){return t!=t}function Sn(t,e){var n=null==t?0:t.length;return n?Ln(t,e)/n:R}function En(t){return function(e){return null==e?i:e[t]}}function Cn(t){return function(e){return null==t?i:t[e]}}function In(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ln(t,e){for(var n,r=-1,o=t.length;++r<o;){var u=e(t[r]);u!==i&&(n=n===i?u:n+u)}return n}function On(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function An(t){return t?t.slice(0,Vn(t)+1).replace(kt,""):t}function Nn(t){return function(e){return t(e)}}function Tn(t,e){return ln(e,(function(e){return t[e]}))}function jn(t,e){return t.has(e)}function xn(t,e){for(var n=-1,r=t.length;++n<r&&mn(e,t[n],0)>-1;);return n}function Mn(t,e){for(var n=t.length;n--&&mn(e,t[n],0)>-1;);return n}var Un=Cn({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),kn=Cn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Rn(t){return"\\"+Ge[t]}function Pn(t){return Me.test(t)}function Dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Gn(t,e){return function(n){return t(e(n))}}function Bn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n];u!==e&&u!==l||(t[n]=l,o[i++]=n)}return o}function Fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Wn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Hn(t){return Pn(t)?function(t){var e=je.lastIndex=0;for(;je.test(t);)++e;return e}(t):dn(t)}function zn(t){return Pn(t)?function(t){return t.match(je)||[]}(t):function(t){return t.split("")}(t)}function Vn(t){for(var e=t.length;e--&&Rt.test(t.charAt(e)););return e}var Kn=Cn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var $n=function t(e){var n,r=(e=null==e?ze:$n.defaults(ze.Object(),e,$n.pick(ze,ke))).Array,Rt=e.Date,Xt=e.Error,te=e.Function,ee=e.Math,ne=e.Object,re=e.RegExp,ie=e.String,oe=e.TypeError,ue=r.prototype,se=te.prototype,ae=ne.prototype,ce=e["__core-js_shared__"],fe=se.toString,le=ae.hasOwnProperty,he=0,pe=(n=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ve=ae.toString,ge=fe.call(ne),de=ze._,ye=re("^"+fe.call(le).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=$e?e.Buffer:i,me=e.Symbol,we=e.Uint8Array,be=_e?_e.allocUnsafe:i,Se=Gn(ne.getPrototypeOf,ne),Ee=ne.create,Ce=ae.propertyIsEnumerable,Ie=ue.splice,Le=me?me.isConcatSpreadable:i,Oe=me?me.iterator:i,Ae=me?me.toStringTag:i,je=function(){try{var t=Wo(ne,"defineProperty");return t({},"",{}),t}catch(t){}}(),Me=e.clearTimeout!==ze.clearTimeout&&e.clearTimeout,Ge=Rt&&Rt.now!==ze.Date.now&&Rt.now,We=e.setTimeout!==ze.setTimeout&&e.setTimeout,He=ee.ceil,Ve=ee.floor,Ke=ne.getOwnPropertySymbols,qe=_e?_e.isBuffer:i,Je=e.isFinite,dn=ue.join,Cn=Gn(ne.keys,ne),qn=ee.max,Jn=ee.min,Zn=Rt.now,Qn=e.parseInt,Yn=ee.random,Xn=ue.reverse,tr=Wo(e,"DataView"),er=Wo(e,"Map"),nr=Wo(e,"Promise"),rr=Wo(e,"Set"),ir=Wo(e,"WeakMap"),or=Wo(ne,"create"),ur=ir&&new ir,sr={},ar=vu(tr),cr=vu(er),fr=vu(nr),lr=vu(rr),hr=vu(ir),pr=me?me.prototype:i,vr=pr?pr.valueOf:i,gr=pr?pr.toString:i;function dr(t){if(js(t)&&!ws(t)&&!(t instanceof wr)){if(t instanceof mr)return t;if(le.call(t,"__wrapped__"))return gu(t)}return new mr(t)}var yr=function(){function t(){}return function(e){if(!Ts(e))return{};if(Ee)return Ee(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function _r(){}function mr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function wr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Sr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Er(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Cr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Er;++e<n;)this.add(t[e])}function Ir(t){var e=this.__data__=new Sr(t);this.size=e.size}function Lr(t,e){var n=ws(t),r=!n&&ms(t),i=!n&&!r&&Cs(t),o=!n&&!r&&!i&&Gs(t),u=n||r||i||o,s=u?On(t.length,ie):[],a=s.length;for(var c in t)!e&&!le.call(t,c)||u&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Jo(c,a))||s.push(c);return s}function Or(t){var e=t.length;return e?t[Ci(0,e-1)]:i}function Ar(t,e){return lu(oo(t),Pr(e,0,t.length))}function Nr(t){return lu(oo(t))}function Tr(t,e,n){(n!==i&&!ds(t[e],n)||n===i&&!(e in t))&&kr(t,e,n)}function jr(t,e,n){var r=t[e];le.call(t,e)&&ds(r,n)&&(n!==i||e in t)||kr(t,e,n)}function xr(t,e){for(var n=t.length;n--;)if(ds(t[n][0],e))return n;return-1}function Mr(t,e,n,r){return Wr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Ur(t,e){return t&&uo(e,sa(e),t)}function kr(t,e,n){"__proto__"==e&&je?je(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Rr(t,e){for(var n=-1,o=e.length,u=r(o),s=null==t;++n<o;)u[n]=s?i:na(t,e[n]);return u}function Pr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function Dr(t,e,n,r,o,u){var s,a=e&h,c=e&p,f=e&v;if(n&&(s=o?n(t,r,o,u):n(t)),s!==i)return s;if(!Ts(t))return t;var l=ws(t);if(l){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!a)return oo(t,s)}else{var g=Vo(t),d=g==q||g==J;if(Cs(t))return Xi(t,a);if(g==X||g==F||d&&!o){if(s=c||d?{}:$o(t),!a)return c?function(t,e){return uo(t,zo(t),e)}(t,function(t,e){return t&&uo(e,aa(e),t)}(s,t)):function(t,e){return uo(t,Ho(t),e)}(t,Ur(s,t))}else{if(!De[g])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case ct:return to(t);case z:case V:return new r(+t);case ft:return function(t,e){var n=e?to(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case lt:case ht:case pt:case vt:case gt:case dt:case yt:case _t:case mt:return eo(t,n);case Z:return new r;case Q:case it:return new r(t);case nt:return function(t){var e=new t.constructor(t.source,zt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case rt:return new r;case ot:return i=t,vr?ne(vr.call(i)):{}}var i}(t,g,a)}}u||(u=new Ir);var y=u.get(t);if(y)return y;u.set(t,s),Rs(t)?t.forEach((function(r){s.add(Dr(r,e,n,r,t,u))})):xs(t)&&t.forEach((function(r,i){s.set(i,Dr(r,e,n,i,t,u))}));var _=l?i:(f?c?ko:Uo:c?aa:sa)(t);return on(_||t,(function(r,i){_&&(r=t[i=r]),jr(s,i,Dr(r,e,n,i,t,u))})),s}function Gr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ne(t);r--;){var o=n[r],u=e[o],s=t[o];if(s===i&&!(o in t)||!u(s))return!1}return!0}function Br(t,e,n){if("function"!=typeof t)throw new oe(s);return su((function(){t.apply(i,n)}),e)}function Fr(t,e,n,r){var i=-1,u=cn,s=!0,a=t.length,c=[],f=e.length;if(!a)return c;n&&(e=ln(e,Nn(n))),r?(u=fn,s=!1):e.length>=o&&(u=jn,s=!1,e=new Cr(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var p=f;p--;)if(e[p]===h)continue t;c.push(l)}else u(e,h,r)||c.push(l)}return c}dr.templateSettings={escape:Ot,evaluate:At,interpolate:Nt,variable:"",imports:{_:dr}},dr.prototype=_r.prototype,dr.prototype.constructor=dr,mr.prototype=yr(_r.prototype),mr.prototype.constructor=mr,wr.prototype=yr(_r.prototype),wr.prototype.constructor=wr,br.prototype.clear=function(){this.__data__=or?or(null):{},this.size=0},br.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},br.prototype.get=function(t){var e=this.__data__;if(or){var n=e[t];return n===c?i:n}return le.call(e,t)?e[t]:i},br.prototype.has=function(t){var e=this.__data__;return or?e[t]!==i:le.call(e,t)},br.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=or&&e===i?c:e,this},Sr.prototype.clear=function(){this.__data__=[],this.size=0},Sr.prototype.delete=function(t){var e=this.__data__,n=xr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ie.call(e,n,1),--this.size,!0)},Sr.prototype.get=function(t){var e=this.__data__,n=xr(e,t);return n<0?i:e[n][1]},Sr.prototype.has=function(t){return xr(this.__data__,t)>-1},Sr.prototype.set=function(t,e){var n=this.__data__,r=xr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Er.prototype.clear=function(){this.size=0,this.__data__={hash:new br,map:new(er||Sr),string:new br}},Er.prototype.delete=function(t){var e=Bo(this,t).delete(t);return this.size-=e?1:0,e},Er.prototype.get=function(t){return Bo(this,t).get(t)},Er.prototype.has=function(t){return Bo(this,t).has(t)},Er.prototype.set=function(t,e){var n=Bo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Cr.prototype.add=Cr.prototype.push=function(t){return this.__data__.set(t,c),this},Cr.prototype.has=function(t){return this.__data__.has(t)},Ir.prototype.clear=function(){this.__data__=new Sr,this.size=0},Ir.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ir.prototype.get=function(t){return this.__data__.get(t)},Ir.prototype.has=function(t){return this.__data__.has(t)},Ir.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Sr){var r=n.__data__;if(!er||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Er(r)}return n.set(t,e),this.size=n.size,this};var Wr=co(Zr),Hr=co(Qr,!0);function zr(t,e){var n=!0;return Wr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function Vr(t,e,n){for(var r=-1,o=t.length;++r<o;){var u=t[r],s=e(u);if(null!=s&&(a===i?s==s&&!Ds(s):n(s,a)))var a=s,c=u}return c}function Kr(t,e){var n=[];return Wr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function $r(t,e,n,r,i){var o=-1,u=t.length;for(n||(n=qo),i||(i=[]);++o<u;){var s=t[o];e>0&&n(s)?e>1?$r(s,e-1,n,r,i):hn(i,s):r||(i[i.length]=s)}return i}var qr=fo(),Jr=fo(!0);function Zr(t,e){return t&&qr(t,e,sa)}function Qr(t,e){return t&&Jr(t,e,sa)}function Yr(t,e){return an(e,(function(e){return Os(t[e])}))}function Xr(t,e){for(var n=0,r=(e=Ji(e,t)).length;null!=t&&n<r;)t=t[pu(e[n++])];return n&&n==r?t:i}function ti(t,e,n){var r=e(t);return ws(t)?r:hn(r,n(t))}function ei(t){return null==t?t===i?ut:Y:Ae&&Ae in ne(t)?function(t){var e=le.call(t,Ae),n=t[Ae];try{t[Ae]=i;var r=!0}catch(t){}var o=ve.call(t);r&&(e?t[Ae]=n:delete t[Ae]);return o}(t):function(t){return ve.call(t)}(t)}function ni(t,e){return t>e}function ri(t,e){return null!=t&&le.call(t,e)}function ii(t,e){return null!=t&&e in ne(t)}function oi(t,e,n){for(var o=n?fn:cn,u=t[0].length,s=t.length,a=s,c=r(s),f=1/0,l=[];a--;){var h=t[a];a&&e&&(h=ln(h,Nn(e))),f=Jn(h.length,f),c[a]=!n&&(e||u>=120&&h.length>=120)?new Cr(a&&h):i}h=t[0];var p=-1,v=c[0];t:for(;++p<u&&l.length<f;){var g=h[p],d=e?e(g):g;if(g=n||0!==g?g:0,!(v?jn(v,d):o(l,d,n))){for(a=s;--a;){var y=c[a];if(!(y?jn(y,d):o(t[a],d,n)))continue t}v&&v.push(d),l.push(g)}}return l}function ui(t,e,n){var r=null==(t=iu(t,e=Ji(e,t)))?t:t[pu(Lu(e))];return null==r?i:nn(r,t,n)}function si(t){return js(t)&&ei(t)==F}function ai(t,e,n,r,o){return t===e||(null==t||null==e||!js(t)&&!js(e)?t!=t&&e!=e:function(t,e,n,r,o,u){var s=ws(t),a=ws(e),c=s?W:Vo(t),f=a?W:Vo(e),l=(c=c==F?X:c)==X,h=(f=f==F?X:f)==X,p=c==f;if(p&&Cs(t)){if(!Cs(e))return!1;s=!0,l=!1}if(p&&!l)return u||(u=new Ir),s||Gs(t)?xo(t,e,n,r,o,u):function(t,e,n,r,i,o,u){switch(n){case ft:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ct:return!(t.byteLength!=e.byteLength||!o(new we(t),new we(e)));case z:case V:case Q:return ds(+t,+e);case $:return t.name==e.name&&t.message==e.message;case nt:case it:return t==e+"";case Z:var s=Dn;case rt:var a=r&g;if(s||(s=Fn),t.size!=e.size&&!a)return!1;var c=u.get(t);if(c)return c==e;r|=d,u.set(t,e);var f=xo(s(t),s(e),r,i,o,u);return u.delete(t),f;case ot:if(vr)return vr.call(t)==vr.call(e)}return!1}(t,e,c,n,r,o,u);if(!(n&g)){var v=l&&le.call(t,"__wrapped__"),y=h&&le.call(e,"__wrapped__");if(v||y){var _=v?t.value():t,m=y?e.value():e;return u||(u=new Ir),o(_,m,n,r,u)}}if(!p)return!1;return u||(u=new Ir),function(t,e,n,r,o,u){var s=n&g,a=Uo(t),c=a.length,f=Uo(e),l=f.length;if(c!=l&&!s)return!1;var h=c;for(;h--;){var p=a[h];if(!(s?p in e:le.call(e,p)))return!1}var v=u.get(t),d=u.get(e);if(v&&d)return v==e&&d==t;var y=!0;u.set(t,e),u.set(e,t);var _=s;for(;++h<c;){var m=t[p=a[h]],w=e[p];if(r)var b=s?r(w,m,p,e,t,u):r(m,w,p,t,e,u);if(!(b===i?m===w||o(m,w,n,r,u):b)){y=!1;break}_||(_="constructor"==p)}if(y&&!_){var S=t.constructor,E=e.constructor;S==E||!("constructor"in t)||!("constructor"in e)||"function"==typeof S&&S instanceof S&&"function"==typeof E&&E instanceof E||(y=!1)}return u.delete(t),u.delete(e),y}(t,e,n,r,o,u)}(t,e,n,r,ai,o))}function ci(t,e,n,r){var o=n.length,u=o,s=!r;if(null==t)return!u;for(t=ne(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var c=(a=n[o])[0],f=t[c],l=a[1];if(s&&a[2]){if(f===i&&!(c in t))return!1}else{var h=new Ir;if(r)var p=r(f,l,c,t,e,h);if(!(p===i?ai(l,f,g|d,r,h):p))return!1}}return!0}function fi(t){return!(!Ts(t)||(e=t,pe&&pe in e))&&(Os(t)?ye:$t).test(vu(t));var e}function li(t){return"function"==typeof t?t:null==t?Ma:"object"==typeof t?ws(t)?yi(t[0],t[1]):di(t):Wa(t)}function hi(t){if(!tu(t))return Cn(t);var e=[];for(var n in ne(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function pi(t){if(!Ts(t))return function(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}(t);var e=tu(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function vi(t,e){return t<e}function gi(t,e){var n=-1,i=Ss(t)?r(t.length):[];return Wr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function di(t){var e=Fo(t);return 1==e.length&&e[0][2]?nu(e[0][0],e[0][1]):function(n){return n===t||ci(n,t,e)}}function yi(t,e){return Qo(t)&&eu(e)?nu(pu(t),e):function(n){var r=na(n,t);return r===i&&r===e?ra(n,t):ai(e,r,g|d)}}function _i(t,e,n,r,o){t!==e&&qr(e,(function(u,s){if(o||(o=new Ir),Ts(u))!function(t,e,n,r,o,u,s){var a=ou(t,n),c=ou(e,n),f=s.get(c);if(f)return void Tr(t,n,f);var l=u?u(a,c,n+"",t,e,s):i,h=l===i;if(h){var p=ws(c),v=!p&&Cs(c),g=!p&&!v&&Gs(c);l=c,p||v||g?ws(a)?l=a:Es(a)?l=oo(a):v?(h=!1,l=Xi(c,!0)):g?(h=!1,l=eo(c,!0)):l=[]:Us(c)||ms(c)?(l=a,ms(a)?l=$s(a):Ts(a)&&!Os(a)||(l=$o(c))):h=!1}h&&(s.set(c,l),o(l,c,r,u,s),s.delete(c));Tr(t,n,l)}(t,e,s,n,_i,r,o);else{var a=r?r(ou(t,s),u,s+"",t,e,o):i;a===i&&(a=u),Tr(t,s,a)}}),aa)}function mi(t,e){var n=t.length;if(n)return Jo(e+=e<0?n:0,n)?t[e]:i}function wi(t,e,n){e=e.length?ln(e,(function(t){return ws(t)?function(e){return Xr(e,1===t.length?t[0]:t)}:t})):[Ma];var r=-1;e=ln(e,Nn(Go()));var i=gi(t,(function(t,n,i){var o=ln(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,u=i.length,s=n.length;for(;++r<u;){var a=no(i[r],o[r]);if(a)return r>=s?a:a*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function bi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var u=e[r],s=Xr(t,u);n(s,u)&&Ni(o,Ji(u,t),s)}return o}function Si(t,e,n,r){var i=r?wn:mn,o=-1,u=e.length,s=t;for(t===e&&(e=oo(e)),n&&(s=ln(t,Nn(n)));++o<u;)for(var a=0,c=e[o],f=n?n(c):c;(a=i(s,f,a,r))>-1;)s!==t&&Ie.call(s,a,1),Ie.call(t,a,1);return t}function Ei(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Jo(i)?Ie.call(t,i,1):Fi(t,i)}}return t}function Ci(t,e){return t+Ve(Yn()*(e-t+1))}function Ii(t,e){var n="";if(!t||e<1||e>U)return n;do{e%2&&(n+=t),(e=Ve(e/2))&&(t+=t)}while(e);return n}function Li(t,e){return au(ru(t,e,Ma),t+"")}function Oi(t){return Or(da(t))}function Ai(t,e){var n=da(t);return lu(n,Pr(e,0,n.length))}function Ni(t,e,n,r){if(!Ts(t))return t;for(var o=-1,u=(e=Ji(e,t)).length,s=u-1,a=t;null!=a&&++o<u;){var c=pu(e[o]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var l=a[c];(f=r?r(l,c,a):i)===i&&(f=Ts(l)?l:Jo(e[o+1])?[]:{})}jr(a,c,f),a=a[c]}return t}var Ti=ur?function(t,e){return ur.set(t,e),t}:Ma,ji=je?function(t,e){return je(t,"toString",{configurable:!0,enumerable:!1,value:Ta(e),writable:!0})}:Ma;function xi(t){return lu(da(t))}function Mi(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var u=r(o);++i<o;)u[i]=t[i+e];return u}function Ui(t,e){var n;return Wr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ki(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=G){for(;r<i;){var o=r+i>>>1,u=t[o];null!==u&&!Ds(u)&&(n?u<=e:u<e)?r=o+1:i=o}return i}return Ri(t,e,Ma,n)}function Ri(t,e,n,r){var o=0,u=null==t?0:t.length;if(0===u)return 0;for(var s=(e=n(e))!=e,a=null===e,c=Ds(e),f=e===i;o<u;){var l=Ve((o+u)/2),h=n(t[l]),p=h!==i,v=null===h,g=h==h,d=Ds(h);if(s)var y=r||g;else y=f?g&&(r||p):a?g&&p&&(r||!v):c?g&&p&&!v&&(r||!d):!v&&!d&&(r?h<=e:h<e);y?o=l+1:u=l}return Jn(u,D)}function Pi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n],s=e?e(u):u;if(!n||!ds(s,a)){var a=s;o[i++]=0===u?0:u}}return o}function Di(t){return"number"==typeof t?t:Ds(t)?R:+t}function Gi(t){if("string"==typeof t)return t;if(ws(t))return ln(t,Gi)+"";if(Ds(t))return gr?gr.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Bi(t,e,n){var r=-1,i=cn,u=t.length,s=!0,a=[],c=a;if(n)s=!1,i=fn;else if(u>=o){var f=e?null:Lo(t);if(f)return Fn(f);s=!1,i=jn,c=new Cr}else c=e?[]:a;t:for(;++r<u;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),a.push(l)}else i(c,h,n)||(c!==a&&c.push(h),a.push(l))}return a}function Fi(t,e){return null==(t=iu(t,e=Ji(e,t)))||delete t[pu(Lu(e))]}function Wi(t,e,n,r){return Ni(t,e,n(Xr(t,e)),r)}function Hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Mi(t,r?0:o,r?o+1:i):Mi(t,r?o+1:0,r?i:o)}function zi(t,e){var n=t;return n instanceof wr&&(n=n.value()),pn(e,(function(t,e){return e.func.apply(e.thisArg,hn([t],e.args))}),n)}function Vi(t,e,n){var i=t.length;if(i<2)return i?Bi(t[0]):[];for(var o=-1,u=r(i);++o<i;)for(var s=t[o],a=-1;++a<i;)a!=o&&(u[o]=Fr(u[o]||s,t[a],e,n));return Bi($r(u,1),e,n)}function Ki(t,e,n){for(var r=-1,o=t.length,u=e.length,s={};++r<o;){var a=r<u?e[r]:i;n(s,t[r],a)}return s}function $i(t){return Es(t)?t:[]}function qi(t){return"function"==typeof t?t:Ma}function Ji(t,e){return ws(t)?t:Qo(t,e)?[t]:hu(qs(t))}var Zi=Li;function Qi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:Mi(t,e,n)}var Yi=Me||function(t){return ze.clearTimeout(t)};function Xi(t,e){if(e)return t.slice();var n=t.length,r=be?be(n):new t.constructor(n);return t.copy(r),r}function to(t){var e=new t.constructor(t.byteLength);return new we(e).set(new we(t)),e}function eo(t,e){var n=e?to(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function no(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,u=Ds(t),s=e!==i,a=null===e,c=e==e,f=Ds(e);if(!a&&!f&&!u&&t>e||u&&s&&c&&!a&&!f||r&&s&&c||!n&&c||!o)return 1;if(!r&&!u&&!f&&t<e||f&&n&&o&&!r&&!u||a&&n&&o||!s&&o||!c)return-1}return 0}function ro(t,e,n,i){for(var o=-1,u=t.length,s=n.length,a=-1,c=e.length,f=qn(u-s,0),l=r(c+f),h=!i;++a<c;)l[a]=e[a];for(;++o<s;)(h||o<u)&&(l[n[o]]=t[o]);for(;f--;)l[a++]=t[o++];return l}function io(t,e,n,i){for(var o=-1,u=t.length,s=-1,a=n.length,c=-1,f=e.length,l=qn(u-a,0),h=r(l+f),p=!i;++o<l;)h[o]=t[o];for(var v=o;++c<f;)h[v+c]=e[c];for(;++s<a;)(p||o<u)&&(h[v+n[s]]=t[o++]);return h}function oo(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function uo(t,e,n,r){var o=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var a=e[u],c=r?r(n[a],t[a],a,n,t):i;c===i&&(c=t[a]),o?kr(n,a,c):jr(n,a,c)}return n}function so(t,e){return function(n,r){var i=ws(n)?rn:Mr,o=e?e():{};return i(n,t,Go(r,2),o)}}function ao(t){return Li((function(e,n){var r=-1,o=n.length,u=o>1?n[o-1]:i,s=o>2?n[2]:i;for(u=t.length>3&&"function"==typeof u?(o--,u):i,s&&Zo(n[0],n[1],s)&&(u=o<3?i:u,o=1),e=ne(e);++r<o;){var a=n[r];a&&t(e,a,r,u)}return e}))}function co(t,e){return function(n,r){if(null==n)return n;if(!Ss(n))return t(n,r);for(var i=n.length,o=e?i:-1,u=ne(n);(e?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function fo(t){return function(e,n,r){for(var i=-1,o=ne(e),u=r(e),s=u.length;s--;){var a=u[t?s:++i];if(!1===n(o[a],a,o))break}return e}}function lo(t){return function(e){var n=Pn(e=qs(e))?zn(e):i,r=n?n[0]:e.charAt(0),o=n?Qi(n,1).join(""):e.slice(1);return r[t]()+o}}function ho(t){return function(e){return pn(Oa(ma(e).replace(Ne,"")),t,"")}}function po(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=yr(t.prototype),r=t.apply(n,e);return Ts(r)?r:n}}function vo(t){return function(e,n,r){var o=ne(e);if(!Ss(e)){var u=Go(n,3);e=sa(e),n=function(t){return u(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[u?e[s]:s]:i}}function go(t){return Mo((function(e){var n=e.length,r=n,o=mr.prototype.thru;for(t&&e.reverse();r--;){var u=e[r];if("function"!=typeof u)throw new oe(s);if(o&&!a&&"wrapper"==Po(u))var a=new mr([],!0)}for(r=a?r:n;++r<n;){var c=Po(u=e[r]),f="wrapper"==c?Ro(u):i;a=f&&Yo(f[0])&&f[1]==(C|w|S|I)&&!f[4].length&&1==f[9]?a[Po(f[0])].apply(a,f[3]):1==u.length&&Yo(u)?a[c]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&ws(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function yo(t,e,n,o,u,s,a,c,f,l){var h=e&C,p=e&y,v=e&_,g=e&(w|b),d=e&L,m=v?i:po(t);return function y(){for(var _=arguments.length,w=r(_),b=_;b--;)w[b]=arguments[b];if(g)var S=Do(y),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,S);if(o&&(w=ro(w,o,u,g)),s&&(w=io(w,s,a,g)),_-=E,g&&_<l){var C=Bn(w,S);return Co(t,e,yo,y.placeholder,n,w,C,c,f,l-_)}var I=p?n:this,L=v?I[t]:t;return _=w.length,c?w=function(t,e){var n=t.length,r=Jn(e.length,n),o=oo(t);for(;r--;){var u=e[r];t[r]=Jo(u,n)?o[u]:i}return t}(w,c):d&&_>1&&w.reverse(),h&&f<_&&(w.length=f),this&&this!==ze&&this instanceof y&&(L=m||po(L)),L.apply(I,w)}}function _o(t,e){return function(n,r){return function(t,e,n,r){return Zr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function mo(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Gi(n),r=Gi(r)):(n=Di(n),r=Di(r)),o=t(n,r)}return o}}function wo(t){return Mo((function(e){return e=ln(e,Nn(Go())),Li((function(n){var r=this;return t(e,(function(t){return nn(t,r,n)}))}))}))}function bo(t,e){var n=(e=e===i?" ":Gi(e)).length;if(n<2)return n?Ii(e,t):e;var r=Ii(e,He(t/Hn(e)));return Pn(e)?Qi(zn(r),0,t).join(""):r.slice(0,t)}function So(t){return function(e,n,o){return o&&"number"!=typeof o&&Zo(e,n,o)&&(n=o=i),e=Hs(e),n===i?(n=e,e=0):n=Hs(n),function(t,e,n,i){for(var o=-1,u=qn(He((e-t)/(n||1)),0),s=r(u);u--;)s[i?u:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:Hs(o),t)}}function Eo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ks(e),n=Ks(n)),t(e,n)}}function Co(t,e,n,r,o,u,s,a,c,f){var l=e&w;e|=l?S:E,(e&=~(l?E:S))&m||(e&=~(y|_));var h=[t,e,o,l?u:i,l?s:i,l?i:u,l?i:s,a,c,f],p=n.apply(i,h);return Yo(t)&&uu(p,h),p.placeholder=r,cu(p,t,e)}function Io(t){var e=ee[t];return function(t,n){if(t=Ks(t),(n=null==n?0:Jn(zs(n),292))&&Je(t)){var r=(qs(t)+"e").split("e");return+((r=(qs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Lo=rr&&1/Fn(new rr([,-0]))[1]==M?function(t){return new rr(t)}:Da;function Oo(t){return function(e){var n=Vo(e);return n==Z?Dn(e):n==rt?Wn(e):function(t,e){return ln(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ao(t,e,n,o,u,a,c,f){var h=e&_;if(!h&&"function"!=typeof t)throw new oe(s);var p=o?o.length:0;if(p||(e&=~(S|E),o=u=i),c=c===i?c:qn(zs(c),0),f=f===i?f:zs(f),p-=u?u.length:0,e&E){var v=o,g=u;o=u=i}var d=h?i:Ro(t),L=[t,e,n,o,u,v,g,a,c,f];if(d&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(y|_|C),u=r==C&&n==w||r==C&&n==I&&t[7].length<=e[8]||r==(C|I)&&e[7].length<=e[8]&&n==w;if(!o&&!u)return t;r&y&&(t[2]=e[2],i|=n&y?0:m);var s=e[3];if(s){var a=t[3];t[3]=a?ro(a,s,e[4]):s,t[4]=a?Bn(t[3],l):e[4]}(s=e[5])&&(a=t[5],t[5]=a?io(a,s,e[6]):s,t[6]=a?Bn(t[5],l):e[6]);(s=e[7])&&(t[7]=s);r&C&&(t[8]=null==t[8]?e[8]:Jn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(L,d),t=L[0],e=L[1],n=L[2],o=L[3],u=L[4],!(f=L[9]=L[9]===i?h?0:t.length:qn(L[9]-p,0))&&e&(w|b)&&(e&=~(w|b)),e&&e!=y)O=e==w||e==b?function(t,e,n){var o=po(t);return function u(){for(var s=arguments.length,a=r(s),c=s,f=Do(u);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==f&&a[s-1]!==f?[]:Bn(a,f);return(s-=l.length)<n?Co(t,e,yo,u.placeholder,i,a,l,i,i,n-s):nn(this&&this!==ze&&this instanceof u?o:t,this,a)}}(t,e,f):e!=S&&e!=(y|S)||u.length?yo.apply(i,L):function(t,e,n,i){var o=e&y,u=po(t);return function e(){for(var s=-1,a=arguments.length,c=-1,f=i.length,l=r(f+a),h=this&&this!==ze&&this instanceof e?u:t;++c<f;)l[c]=i[c];for(;a--;)l[c++]=arguments[++s];return nn(h,o?n:this,l)}}(t,e,n,o);else var O=function(t,e,n){var r=e&y,i=po(t);return function e(){return(this&&this!==ze&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return cu((d?Ti:uu)(O,L),t,e)}function No(t,e,n,r){return t===i||ds(t,ae[n])&&!le.call(r,n)?e:t}function To(t,e,n,r,o,u){return Ts(t)&&Ts(e)&&(u.set(e,t),_i(t,e,i,To,u),u.delete(e)),t}function jo(t){return Us(t)?i:t}function xo(t,e,n,r,o,u){var s=n&g,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var f=u.get(t),l=u.get(e);if(f&&l)return f==e&&l==t;var h=-1,p=!0,v=n&d?new Cr:i;for(u.set(t,e),u.set(e,t);++h<a;){var y=t[h],_=e[h];if(r)var m=s?r(_,y,h,e,t,u):r(y,_,h,t,e,u);if(m!==i){if(m)continue;p=!1;break}if(v){if(!gn(e,(function(t,e){if(!jn(v,e)&&(y===t||o(y,t,n,r,u)))return v.push(e)}))){p=!1;break}}else if(y!==_&&!o(y,_,n,r,u)){p=!1;break}}return u.delete(t),u.delete(e),p}function Mo(t){return au(ru(t,i,bu),t+"")}function Uo(t){return ti(t,sa,Ho)}function ko(t){return ti(t,aa,zo)}var Ro=ur?function(t){return ur.get(t)}:Da;function Po(t){for(var e=t.name+"",n=sr[e],r=le.call(sr,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Do(t){return(le.call(dr,"placeholder")?dr:t).placeholder}function Go(){var t=dr.iteratee||Ua;return t=t===Ua?li:t,arguments.length?t(arguments[0],arguments[1]):t}function Bo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Fo(t){for(var e=sa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,eu(i)]}return e}function Wo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return fi(n)?n:i}var Ho=Ke?function(t){return null==t?[]:(t=ne(t),an(Ke(t),(function(e){return Ce.call(t,e)})))}:Va,zo=Ke?function(t){for(var e=[];t;)hn(e,Ho(t)),t=Se(t);return e}:Va,Vo=ei;function Ko(t,e,n){for(var r=-1,i=(e=Ji(e,t)).length,o=!1;++r<i;){var u=pu(e[r]);if(!(o=null!=t&&n(t,u)))break;t=t[u]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ns(i)&&Jo(u,i)&&(ws(t)||ms(t))}function $o(t){return"function"!=typeof t.constructor||tu(t)?{}:yr(Se(t))}function qo(t){return ws(t)||ms(t)||!!(Le&&t&&t[Le])}function Jo(t,e){var n=typeof t;return!!(e=null==e?U:e)&&("number"==n||"symbol"!=n&&Jt.test(t))&&t>-1&&t%1==0&&t<e}function Zo(t,e,n){if(!Ts(n))return!1;var r=typeof e;return!!("number"==r?Ss(n)&&Jo(e,n.length):"string"==r&&e in n)&&ds(n[e],t)}function Qo(t,e){if(ws(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ds(t))||(jt.test(t)||!Tt.test(t)||null!=e&&t in ne(e))}function Yo(t){var e=Po(t),n=dr[e];if("function"!=typeof n||!(e in wr.prototype))return!1;if(t===n)return!0;var r=Ro(n);return!!r&&t===r[0]}(tr&&Vo(new tr(new ArrayBuffer(1)))!=ft||er&&Vo(new er)!=Z||nr&&Vo(nr.resolve())!=tt||rr&&Vo(new rr)!=rt||ir&&Vo(new ir)!=st)&&(Vo=function(t){var e=ei(t),n=e==X?t.constructor:i,r=n?vu(n):"";if(r)switch(r){case ar:return ft;case cr:return Z;case fr:return tt;case lr:return rt;case hr:return st}return e});var Xo=ce?Os:Ka;function tu(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function eu(t){return t==t&&!Ts(t)}function nu(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in ne(n)))}}function ru(t,e,n){return e=qn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,u=qn(i.length-e,0),s=r(u);++o<u;)s[o]=i[e+o];o=-1;for(var a=r(e+1);++o<e;)a[o]=i[o];return a[e]=n(s),nn(t,this,a)}}function iu(t,e){return e.length<2?t:Xr(t,Mi(e,0,-1))}function ou(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var uu=fu(Ti),su=We||function(t,e){return ze.setTimeout(t,e)},au=fu(ji);function cu(t,e,n){var r=e+"";return au(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Pt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return on(B,(function(n){var r="_."+n[0];e&n[1]&&!cn(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(Dt);return e?e[1].split(Gt):[]}(r),n)))}function fu(t){var e=0,n=0;return function(){var r=Zn(),o=T-(r-n);if(n=r,o>0){if(++e>=N)return arguments[0]}else e=0;return t.apply(i,arguments)}}function lu(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var u=Ci(n,o),s=t[u];t[u]=t[n],t[n]=s}return t.length=e,t}var hu=function(t){var e=fs(t,(function(t){return n.size===f&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(xt,(function(t,n,r,i){e.push(r?i.replace(Wt,"$1"):n||t)})),e}));function pu(t){if("string"==typeof t||Ds(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function vu(t){if(null!=t){try{return fe.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function gu(t){if(t instanceof wr)return t.clone();var e=new mr(t.__wrapped__,t.__chain__);return e.__actions__=oo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var du=Li((function(t,e){return Es(t)?Fr(t,$r(e,1,Es,!0)):[]})),yu=Li((function(t,e){var n=Lu(e);return Es(n)&&(n=i),Es(t)?Fr(t,$r(e,1,Es,!0),Go(n,2)):[]})),_u=Li((function(t,e){var n=Lu(e);return Es(n)&&(n=i),Es(t)?Fr(t,$r(e,1,Es,!0),i,n):[]}));function mu(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:zs(n);return i<0&&(i=qn(r+i,0)),_n(t,Go(e,3),i)}function wu(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=zs(n),o=n<0?qn(r+o,0):Jn(o,r-1)),_n(t,Go(e,3),o,!0)}function bu(t){return(null==t?0:t.length)?$r(t,1):[]}function Su(t){return t&&t.length?t[0]:i}var Eu=Li((function(t){var e=ln(t,$i);return e.length&&e[0]===t[0]?oi(e):[]})),Cu=Li((function(t){var e=Lu(t),n=ln(t,$i);return e===Lu(n)?e=i:n.pop(),n.length&&n[0]===t[0]?oi(n,Go(e,2)):[]})),Iu=Li((function(t){var e=Lu(t),n=ln(t,$i);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?oi(n,i,e):[]}));function Lu(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Ou=Li(Au);function Au(t,e){return t&&t.length&&e&&e.length?Si(t,e):t}var Nu=Mo((function(t,e){var n=null==t?0:t.length,r=Rr(t,e);return Ei(t,ln(e,(function(t){return Jo(t,n)?+t:t})).sort(no)),r}));function Tu(t){return null==t?t:Xn.call(t)}var ju=Li((function(t){return Bi($r(t,1,Es,!0))})),xu=Li((function(t){var e=Lu(t);return Es(e)&&(e=i),Bi($r(t,1,Es,!0),Go(e,2))})),Mu=Li((function(t){var e=Lu(t);return e="function"==typeof e?e:i,Bi($r(t,1,Es,!0),i,e)}));function Uu(t){if(!t||!t.length)return[];var e=0;return t=an(t,(function(t){if(Es(t))return e=qn(t.length,e),!0})),On(e,(function(e){return ln(t,En(e))}))}function ku(t,e){if(!t||!t.length)return[];var n=Uu(t);return null==e?n:ln(n,(function(t){return nn(e,i,t)}))}var Ru=Li((function(t,e){return Es(t)?Fr(t,e):[]})),Pu=Li((function(t){return Vi(an(t,Es))})),Du=Li((function(t){var e=Lu(t);return Es(e)&&(e=i),Vi(an(t,Es),Go(e,2))})),Gu=Li((function(t){var e=Lu(t);return e="function"==typeof e?e:i,Vi(an(t,Es),i,e)})),Bu=Li(Uu);var Fu=Li((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ku(t,n)}));function Wu(t){var e=dr(t);return e.__chain__=!0,e}function Hu(t,e){return e(t)}var zu=Mo((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Rr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof wr&&Jo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Hu,args:[o],thisArg:i}),new mr(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)}));var Vu=so((function(t,e,n){le.call(t,n)?++t[n]:kr(t,n,1)}));var Ku=vo(mu),$u=vo(wu);function qu(t,e){return(ws(t)?on:Wr)(t,Go(e,3))}function Ju(t,e){return(ws(t)?un:Hr)(t,Go(e,3))}var Zu=so((function(t,e,n){le.call(t,n)?t[n].push(e):kr(t,n,[e])}));var Qu=Li((function(t,e,n){var i=-1,o="function"==typeof e,u=Ss(t)?r(t.length):[];return Wr(t,(function(t){u[++i]=o?nn(e,t,n):ui(t,e,n)})),u})),Yu=so((function(t,e,n){kr(t,n,e)}));function Xu(t,e){return(ws(t)?ln:gi)(t,Go(e,3))}var ts=so((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var es=Li((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Zo(t,e[0],e[1])?e=[]:n>2&&Zo(e[0],e[1],e[2])&&(e=[e[0]]),wi(t,$r(e,1),[])})),ns=Ge||function(){return ze.Date.now()};function rs(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ao(t,C,i,i,i,i,e)}function is(t,e){var n;if("function"!=typeof e)throw new oe(s);return t=zs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var os=Li((function(t,e,n){var r=y;if(n.length){var i=Bn(n,Do(os));r|=S}return Ao(t,r,e,n,i)})),us=Li((function(t,e,n){var r=y|_;if(n.length){var i=Bn(n,Do(us));r|=S}return Ao(e,r,t,n,i)}));function ss(t,e,n){var r,o,u,a,c,f,l=0,h=!1,p=!1,v=!0;if("function"!=typeof t)throw new oe(s);function g(e){var n=r,u=o;return r=o=i,l=e,a=t.apply(u,n)}function d(t){var n=t-f;return f===i||n>=e||n<0||p&&t-l>=u}function y(){var t=ns();if(d(t))return _(t);c=su(y,function(t){var n=e-(t-f);return p?Jn(n,u-(t-l)):n}(t))}function _(t){return c=i,v&&r?g(t):(r=o=i,a)}function m(){var t=ns(),n=d(t);if(r=arguments,o=this,f=t,n){if(c===i)return function(t){return l=t,c=su(y,e),h?g(t):a}(f);if(p)return Yi(c),c=su(y,e),g(f)}return c===i&&(c=su(y,e)),a}return e=Ks(e)||0,Ts(n)&&(h=!!n.leading,u=(p="maxWait"in n)?qn(Ks(n.maxWait)||0,e):u,v="trailing"in n?!!n.trailing:v),m.cancel=function(){c!==i&&Yi(c),l=0,r=f=o=c=i},m.flush=function(){return c===i?a:_(ns())},m}var as=Li((function(t,e){return Br(t,1,e)})),cs=Li((function(t,e,n){return Br(t,Ks(e)||0,n)}));function fs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(s);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(fs.Cache||Er),n}function ls(t){if("function"!=typeof t)throw new oe(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}fs.Cache=Er;var hs=Zi((function(t,e){var n=(e=1==e.length&&ws(e[0])?ln(e[0],Nn(Go())):ln($r(e,1),Nn(Go()))).length;return Li((function(r){for(var i=-1,o=Jn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return nn(t,this,r)}))})),ps=Li((function(t,e){var n=Bn(e,Do(ps));return Ao(t,S,i,e,n)})),vs=Li((function(t,e){var n=Bn(e,Do(vs));return Ao(t,E,i,e,n)})),gs=Mo((function(t,e){return Ao(t,I,i,i,i,e)}));function ds(t,e){return t===e||t!=t&&e!=e}var ys=Eo(ni),_s=Eo((function(t,e){return t>=e})),ms=si(function(){return arguments}())?si:function(t){return js(t)&&le.call(t,"callee")&&!Ce.call(t,"callee")},ws=r.isArray,bs=Ze?Nn(Ze):function(t){return js(t)&&ei(t)==ct};function Ss(t){return null!=t&&Ns(t.length)&&!Os(t)}function Es(t){return js(t)&&Ss(t)}var Cs=qe||Ka,Is=Qe?Nn(Qe):function(t){return js(t)&&ei(t)==V};function Ls(t){if(!js(t))return!1;var e=ei(t);return e==$||e==K||"string"==typeof t.message&&"string"==typeof t.name&&!Us(t)}function Os(t){if(!Ts(t))return!1;var e=ei(t);return e==q||e==J||e==H||e==et}function As(t){return"number"==typeof t&&t==zs(t)}function Ns(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=U}function Ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function js(t){return null!=t&&"object"==typeof t}var xs=Ye?Nn(Ye):function(t){return js(t)&&Vo(t)==Z};function Ms(t){return"number"==typeof t||js(t)&&ei(t)==Q}function Us(t){if(!js(t)||ei(t)!=X)return!1;var e=Se(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&fe.call(n)==ge}var ks=Xe?Nn(Xe):function(t){return js(t)&&ei(t)==nt};var Rs=tn?Nn(tn):function(t){return js(t)&&Vo(t)==rt};function Ps(t){return"string"==typeof t||!ws(t)&&js(t)&&ei(t)==it}function Ds(t){return"symbol"==typeof t||js(t)&&ei(t)==ot}var Gs=en?Nn(en):function(t){return js(t)&&Ns(t.length)&&!!Pe[ei(t)]};var Bs=Eo(vi),Fs=Eo((function(t,e){return t<=e}));function Ws(t){if(!t)return[];if(Ss(t))return Ps(t)?zn(t):oo(t);if(Oe&&t[Oe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Oe]());var e=Vo(t);return(e==Z?Dn:e==rt?Fn:da)(t)}function Hs(t){return t?(t=Ks(t))===M||t===-M?(t<0?-1:1)*k:t==t?t:0:0===t?t:0}function zs(t){var e=Hs(t),n=e%1;return e==e?n?e-n:e:0}function Vs(t){return t?Pr(zs(t),0,P):0}function Ks(t){if("number"==typeof t)return t;if(Ds(t))return R;if(Ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=An(t);var n=Kt.test(t);return n||qt.test(t)?Fe(t.slice(2),n?2:8):Vt.test(t)?R:+t}function $s(t){return uo(t,aa(t))}function qs(t){return null==t?"":Gi(t)}var Js=ao((function(t,e){if(tu(e)||Ss(e))uo(e,sa(e),t);else for(var n in e)le.call(e,n)&&jr(t,n,e[n])})),Zs=ao((function(t,e){uo(e,aa(e),t)})),Qs=ao((function(t,e,n,r){uo(e,aa(e),t,r)})),Ys=ao((function(t,e,n,r){uo(e,sa(e),t,r)})),Xs=Mo(Rr);var ta=Li((function(t,e){t=ne(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&Zo(e[0],e[1],o)&&(r=1);++n<r;)for(var u=e[n],s=aa(u),a=-1,c=s.length;++a<c;){var f=s[a],l=t[f];(l===i||ds(l,ae[f])&&!le.call(t,f))&&(t[f]=u[f])}return t})),ea=Li((function(t){return t.push(i,To),nn(fa,i,t)}));function na(t,e,n){var r=null==t?i:Xr(t,e);return r===i?n:r}function ra(t,e){return null!=t&&Ko(t,e,ii)}var ia=_o((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ve.call(e)),t[e]=n}),Ta(Ma)),oa=_o((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ve.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]}),Go),ua=Li(ui);function sa(t){return Ss(t)?Lr(t):hi(t)}function aa(t){return Ss(t)?Lr(t,!0):pi(t)}var ca=ao((function(t,e,n){_i(t,e,n)})),fa=ao((function(t,e,n,r){_i(t,e,n,r)})),la=Mo((function(t,e){var n={};if(null==t)return n;var r=!1;e=ln(e,(function(e){return e=Ji(e,t),r||(r=e.length>1),e})),uo(t,ko(t),n),r&&(n=Dr(n,h|p|v,jo));for(var i=e.length;i--;)Fi(n,e[i]);return n}));var ha=Mo((function(t,e){return null==t?{}:function(t,e){return bi(t,e,(function(e,n){return ra(t,n)}))}(t,e)}));function pa(t,e){if(null==t)return{};var n=ln(ko(t),(function(t){return[t]}));return e=Go(e),bi(t,n,(function(t,n){return e(t,n[0])}))}var va=Oo(sa),ga=Oo(aa);function da(t){return null==t?[]:Tn(t,sa(t))}var ya=ho((function(t,e,n){return e=e.toLowerCase(),t+(n?_a(e):e)}));function _a(t){return La(qs(t).toLowerCase())}function ma(t){return(t=qs(t))&&t.replace(Zt,Un).replace(Te,"")}var wa=ho((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),ba=ho((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Sa=lo("toLowerCase");var Ea=ho((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ca=ho((function(t,e,n){return t+(n?" ":"")+La(e)}));var Ia=ho((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),La=lo("toUpperCase");function Oa(t,e,n){return t=qs(t),(e=n?i:e)===i?function(t){return Ue.test(t)}(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(e)||[]}var Aa=Li((function(t,e){try{return nn(t,i,e)}catch(t){return Ls(t)?t:new Xt(t)}})),Na=Mo((function(t,e){return on(e,(function(e){e=pu(e),kr(t,e,os(t[e],t))})),t}));function Ta(t){return function(){return t}}var ja=go(),xa=go(!0);function Ma(t){return t}function Ua(t){return li("function"==typeof t?t:Dr(t,h))}var ka=Li((function(t,e){return function(n){return ui(n,t,e)}})),Ra=Li((function(t,e){return function(n){return ui(t,n,e)}}));function Pa(t,e,n){var r=sa(e),i=Yr(e,r);null!=n||Ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Yr(e,sa(e)));var o=!(Ts(n)&&"chain"in n&&!n.chain),u=Os(t);return on(i,(function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=oo(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,hn([this.value()],arguments))})})),t}function Da(){}var Ga=wo(ln),Ba=wo(sn),Fa=wo(gn);function Wa(t){return Qo(t)?En(pu(t)):function(t){return function(e){return Xr(e,t)}}(t)}var Ha=So(),za=So(!0);function Va(){return[]}function Ka(){return!1}var $a=mo((function(t,e){return t+e}),0),qa=Io("ceil"),Ja=mo((function(t,e){return t/e}),1),Za=Io("floor");var Qa,Ya=mo((function(t,e){return t*e}),1),Xa=Io("round"),tc=mo((function(t,e){return t-e}),0);return dr.after=function(t,e){if("function"!=typeof e)throw new oe(s);return t=zs(t),function(){if(--t<1)return e.apply(this,arguments)}},dr.ary=rs,dr.assign=Js,dr.assignIn=Zs,dr.assignInWith=Qs,dr.assignWith=Ys,dr.at=Xs,dr.before=is,dr.bind=os,dr.bindAll=Na,dr.bindKey=us,dr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ws(t)?t:[t]},dr.chain=Wu,dr.chunk=function(t,e,n){e=(n?Zo(t,e,n):e===i)?1:qn(zs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var u=0,s=0,a=r(He(o/e));u<o;)a[s++]=Mi(t,u,u+=e);return a},dr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},dr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return hn(ws(n)?oo(n):[n],$r(e,1))},dr.cond=function(t){var e=null==t?0:t.length,n=Go();return t=e?ln(t,(function(t){if("function"!=typeof t[1])throw new oe(s);return[n(t[0]),t[1]]})):[],Li((function(n){for(var r=-1;++r<e;){var i=t[r];if(nn(i[0],this,n))return nn(i[1],this,n)}}))},dr.conforms=function(t){return function(t){var e=sa(t);return function(n){return Gr(n,t,e)}}(Dr(t,h))},dr.constant=Ta,dr.countBy=Vu,dr.create=function(t,e){var n=yr(t);return null==e?n:Ur(n,e)},dr.curry=function t(e,n,r){var o=Ao(e,w,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},dr.curryRight=function t(e,n,r){var o=Ao(e,b,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},dr.debounce=ss,dr.defaults=ta,dr.defaultsDeep=ea,dr.defer=as,dr.delay=cs,dr.difference=du,dr.differenceBy=yu,dr.differenceWith=_u,dr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Mi(t,(e=n||e===i?1:zs(e))<0?0:e,r):[]},dr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Mi(t,0,(e=r-(e=n||e===i?1:zs(e)))<0?0:e):[]},dr.dropRightWhile=function(t,e){return t&&t.length?Hi(t,Go(e,3),!0,!0):[]},dr.dropWhile=function(t,e){return t&&t.length?Hi(t,Go(e,3),!0):[]},dr.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Zo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=zs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:zs(r))<0&&(r+=o),r=n>r?0:Vs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},dr.filter=function(t,e){return(ws(t)?an:Kr)(t,Go(e,3))},dr.flatMap=function(t,e){return $r(Xu(t,e),1)},dr.flatMapDeep=function(t,e){return $r(Xu(t,e),M)},dr.flatMapDepth=function(t,e,n){return n=n===i?1:zs(n),$r(Xu(t,e),n)},dr.flatten=bu,dr.flattenDeep=function(t){return(null==t?0:t.length)?$r(t,M):[]},dr.flattenDepth=function(t,e){return(null==t?0:t.length)?$r(t,e=e===i?1:zs(e)):[]},dr.flip=function(t){return Ao(t,L)},dr.flow=ja,dr.flowRight=xa,dr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dr.functions=function(t){return null==t?[]:Yr(t,sa(t))},dr.functionsIn=function(t){return null==t?[]:Yr(t,aa(t))},dr.groupBy=Zu,dr.initial=function(t){return(null==t?0:t.length)?Mi(t,0,-1):[]},dr.intersection=Eu,dr.intersectionBy=Cu,dr.intersectionWith=Iu,dr.invert=ia,dr.invertBy=oa,dr.invokeMap=Qu,dr.iteratee=Ua,dr.keyBy=Yu,dr.keys=sa,dr.keysIn=aa,dr.map=Xu,dr.mapKeys=function(t,e){var n={};return e=Go(e,3),Zr(t,(function(t,r,i){kr(n,e(t,r,i),t)})),n},dr.mapValues=function(t,e){var n={};return e=Go(e,3),Zr(t,(function(t,r,i){kr(n,r,e(t,r,i))})),n},dr.matches=function(t){return di(Dr(t,h))},dr.matchesProperty=function(t,e){return yi(t,Dr(e,h))},dr.memoize=fs,dr.merge=ca,dr.mergeWith=fa,dr.method=ka,dr.methodOf=Ra,dr.mixin=Pa,dr.negate=ls,dr.nthArg=function(t){return t=zs(t),Li((function(e){return mi(e,t)}))},dr.omit=la,dr.omitBy=function(t,e){return pa(t,ls(Go(e)))},dr.once=function(t){return is(2,t)},dr.orderBy=function(t,e,n,r){return null==t?[]:(ws(e)||(e=null==e?[]:[e]),ws(n=r?i:n)||(n=null==n?[]:[n]),wi(t,e,n))},dr.over=Ga,dr.overArgs=hs,dr.overEvery=Ba,dr.overSome=Fa,dr.partial=ps,dr.partialRight=vs,dr.partition=ts,dr.pick=ha,dr.pickBy=pa,dr.property=Wa,dr.propertyOf=function(t){return function(e){return null==t?i:Xr(t,e)}},dr.pull=Ou,dr.pullAll=Au,dr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Si(t,e,Go(n,2)):t},dr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Si(t,e,i,n):t},dr.pullAt=Nu,dr.range=Ha,dr.rangeRight=za,dr.rearg=gs,dr.reject=function(t,e){return(ws(t)?an:Kr)(t,ls(Go(e,3)))},dr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Go(e,3);++r<o;){var u=t[r];e(u,r,t)&&(n.push(u),i.push(r))}return Ei(t,i),n},dr.rest=function(t,e){if("function"!=typeof t)throw new oe(s);return Li(t,e=e===i?e:zs(e))},dr.reverse=Tu,dr.sampleSize=function(t,e,n){return e=(n?Zo(t,e,n):e===i)?1:zs(e),(ws(t)?Ar:Ai)(t,e)},dr.set=function(t,e,n){return null==t?t:Ni(t,e,n)},dr.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Ni(t,e,n,r)},dr.shuffle=function(t){return(ws(t)?Nr:xi)(t)},dr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Zo(t,e,n)?(e=0,n=r):(e=null==e?0:zs(e),n=n===i?r:zs(n)),Mi(t,e,n)):[]},dr.sortBy=es,dr.sortedUniq=function(t){return t&&t.length?Pi(t):[]},dr.sortedUniqBy=function(t,e){return t&&t.length?Pi(t,Go(e,2)):[]},dr.split=function(t,e,n){return n&&"number"!=typeof n&&Zo(t,e,n)&&(e=n=i),(n=n===i?P:n>>>0)?(t=qs(t))&&("string"==typeof e||null!=e&&!ks(e))&&!(e=Gi(e))&&Pn(t)?Qi(zn(t),0,n):t.split(e,n):[]},dr.spread=function(t,e){if("function"!=typeof t)throw new oe(s);return e=null==e?0:qn(zs(e),0),Li((function(n){var r=n[e],i=Qi(n,0,e);return r&&hn(i,r),nn(t,this,i)}))},dr.tail=function(t){var e=null==t?0:t.length;return e?Mi(t,1,e):[]},dr.take=function(t,e,n){return t&&t.length?Mi(t,0,(e=n||e===i?1:zs(e))<0?0:e):[]},dr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Mi(t,(e=r-(e=n||e===i?1:zs(e)))<0?0:e,r):[]},dr.takeRightWhile=function(t,e){return t&&t.length?Hi(t,Go(e,3),!1,!0):[]},dr.takeWhile=function(t,e){return t&&t.length?Hi(t,Go(e,3)):[]},dr.tap=function(t,e){return e(t),t},dr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new oe(s);return Ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ss(t,e,{leading:r,maxWait:e,trailing:i})},dr.thru=Hu,dr.toArray=Ws,dr.toPairs=va,dr.toPairsIn=ga,dr.toPath=function(t){return ws(t)?ln(t,pu):Ds(t)?[t]:oo(hu(qs(t)))},dr.toPlainObject=$s,dr.transform=function(t,e,n){var r=ws(t),i=r||Cs(t)||Gs(t);if(e=Go(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ts(t)&&Os(o)?yr(Se(t)):{}}return(i?on:Zr)(t,(function(t,r,i){return e(n,t,r,i)})),n},dr.unary=function(t){return rs(t,1)},dr.union=ju,dr.unionBy=xu,dr.unionWith=Mu,dr.uniq=function(t){return t&&t.length?Bi(t):[]},dr.uniqBy=function(t,e){return t&&t.length?Bi(t,Go(e,2)):[]},dr.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?Bi(t,i,e):[]},dr.unset=function(t,e){return null==t||Fi(t,e)},dr.unzip=Uu,dr.unzipWith=ku,dr.update=function(t,e,n){return null==t?t:Wi(t,e,qi(n))},dr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Wi(t,e,qi(n),r)},dr.values=da,dr.valuesIn=function(t){return null==t?[]:Tn(t,aa(t))},dr.without=Ru,dr.words=Oa,dr.wrap=function(t,e){return ps(qi(e),t)},dr.xor=Pu,dr.xorBy=Du,dr.xorWith=Gu,dr.zip=Bu,dr.zipObject=function(t,e){return Ki(t||[],e||[],jr)},dr.zipObjectDeep=function(t,e){return Ki(t||[],e||[],Ni)},dr.zipWith=Fu,dr.entries=va,dr.entriesIn=ga,dr.extend=Zs,dr.extendWith=Qs,Pa(dr,dr),dr.add=$a,dr.attempt=Aa,dr.camelCase=ya,dr.capitalize=_a,dr.ceil=qa,dr.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=Ks(n))==n?n:0),e!==i&&(e=(e=Ks(e))==e?e:0),Pr(Ks(t),e,n)},dr.clone=function(t){return Dr(t,v)},dr.cloneDeep=function(t){return Dr(t,h|v)},dr.cloneDeepWith=function(t,e){return Dr(t,h|v,e="function"==typeof e?e:i)},dr.cloneWith=function(t,e){return Dr(t,v,e="function"==typeof e?e:i)},dr.conformsTo=function(t,e){return null==e||Gr(t,e,sa(e))},dr.deburr=ma,dr.defaultTo=function(t,e){return null==t||t!=t?e:t},dr.divide=Ja,dr.endsWith=function(t,e,n){t=qs(t),e=Gi(e);var r=t.length,o=n=n===i?r:Pr(zs(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},dr.eq=ds,dr.escape=function(t){return(t=qs(t))&&Lt.test(t)?t.replace(Ct,kn):t},dr.escapeRegExp=function(t){return(t=qs(t))&&Ut.test(t)?t.replace(Mt,"\\$&"):t},dr.every=function(t,e,n){var r=ws(t)?sn:zr;return n&&Zo(t,e,n)&&(e=i),r(t,Go(e,3))},dr.find=Ku,dr.findIndex=mu,dr.findKey=function(t,e){return yn(t,Go(e,3),Zr)},dr.findLast=$u,dr.findLastIndex=wu,dr.findLastKey=function(t,e){return yn(t,Go(e,3),Qr)},dr.floor=Za,dr.forEach=qu,dr.forEachRight=Ju,dr.forIn=function(t,e){return null==t?t:qr(t,Go(e,3),aa)},dr.forInRight=function(t,e){return null==t?t:Jr(t,Go(e,3),aa)},dr.forOwn=function(t,e){return t&&Zr(t,Go(e,3))},dr.forOwnRight=function(t,e){return t&&Qr(t,Go(e,3))},dr.get=na,dr.gt=ys,dr.gte=_s,dr.has=function(t,e){return null!=t&&Ko(t,e,ri)},dr.hasIn=ra,dr.head=Su,dr.identity=Ma,dr.includes=function(t,e,n,r){t=Ss(t)?t:da(t),n=n&&!r?zs(n):0;var i=t.length;return n<0&&(n=qn(i+n,0)),Ps(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&mn(t,e,n)>-1},dr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:zs(n);return i<0&&(i=qn(r+i,0)),mn(t,e,i)},dr.inRange=function(t,e,n){return e=Hs(e),n===i?(n=e,e=0):n=Hs(n),function(t,e,n){return t>=Jn(e,n)&&t<qn(e,n)}(t=Ks(t),e,n)},dr.invoke=ua,dr.isArguments=ms,dr.isArray=ws,dr.isArrayBuffer=bs,dr.isArrayLike=Ss,dr.isArrayLikeObject=Es,dr.isBoolean=function(t){return!0===t||!1===t||js(t)&&ei(t)==z},dr.isBuffer=Cs,dr.isDate=Is,dr.isElement=function(t){return js(t)&&1===t.nodeType&&!Us(t)},dr.isEmpty=function(t){if(null==t)return!0;if(Ss(t)&&(ws(t)||"string"==typeof t||"function"==typeof t.splice||Cs(t)||Gs(t)||ms(t)))return!t.length;var e=Vo(t);if(e==Z||e==rt)return!t.size;if(tu(t))return!hi(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},dr.isEqual=function(t,e){return ai(t,e)},dr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?ai(t,e,i,n):!!r},dr.isError=Ls,dr.isFinite=function(t){return"number"==typeof t&&Je(t)},dr.isFunction=Os,dr.isInteger=As,dr.isLength=Ns,dr.isMap=xs,dr.isMatch=function(t,e){return t===e||ci(t,e,Fo(e))},dr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,ci(t,e,Fo(e),n)},dr.isNaN=function(t){return Ms(t)&&t!=+t},dr.isNative=function(t){if(Xo(t))throw new Xt(u);return fi(t)},dr.isNil=function(t){return null==t},dr.isNull=function(t){return null===t},dr.isNumber=Ms,dr.isObject=Ts,dr.isObjectLike=js,dr.isPlainObject=Us,dr.isRegExp=ks,dr.isSafeInteger=function(t){return As(t)&&t>=-U&&t<=U},dr.isSet=Rs,dr.isString=Ps,dr.isSymbol=Ds,dr.isTypedArray=Gs,dr.isUndefined=function(t){return t===i},dr.isWeakMap=function(t){return js(t)&&Vo(t)==st},dr.isWeakSet=function(t){return js(t)&&ei(t)==at},dr.join=function(t,e){return null==t?"":dn.call(t,e)},dr.kebabCase=wa,dr.last=Lu,dr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=zs(n))<0?qn(r+o,0):Jn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):_n(t,bn,o,!0)},dr.lowerCase=ba,dr.lowerFirst=Sa,dr.lt=Bs,dr.lte=Fs,dr.max=function(t){return t&&t.length?Vr(t,Ma,ni):i},dr.maxBy=function(t,e){return t&&t.length?Vr(t,Go(e,2),ni):i},dr.mean=function(t){return Sn(t,Ma)},dr.meanBy=function(t,e){return Sn(t,Go(e,2))},dr.min=function(t){return t&&t.length?Vr(t,Ma,vi):i},dr.minBy=function(t,e){return t&&t.length?Vr(t,Go(e,2),vi):i},dr.stubArray=Va,dr.stubFalse=Ka,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Ya,dr.nth=function(t,e){return t&&t.length?mi(t,zs(e)):i},dr.noConflict=function(){return ze._===this&&(ze._=de),this},dr.noop=Da,dr.now=ns,dr.pad=function(t,e,n){t=qs(t);var r=(e=zs(e))?Hn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return bo(Ve(i),n)+t+bo(He(i),n)},dr.padEnd=function(t,e,n){t=qs(t);var r=(e=zs(e))?Hn(t):0;return e&&r<e?t+bo(e-r,n):t},dr.padStart=function(t,e,n){t=qs(t);var r=(e=zs(e))?Hn(t):0;return e&&r<e?bo(e-r,n)+t:t},dr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Qn(qs(t).replace(kt,""),e||0)},dr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Zo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=Hs(t),e===i?(e=t,t=0):e=Hs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=Yn();return Jn(t+o*(e-t+Be("1e-"+((o+"").length-1))),e)}return Ci(t,e)},dr.reduce=function(t,e,n){var r=ws(t)?pn:In,i=arguments.length<3;return r(t,Go(e,4),n,i,Wr)},dr.reduceRight=function(t,e,n){var r=ws(t)?vn:In,i=arguments.length<3;return r(t,Go(e,4),n,i,Hr)},dr.repeat=function(t,e,n){return e=(n?Zo(t,e,n):e===i)?1:zs(e),Ii(qs(t),e)},dr.replace=function(){var t=arguments,e=qs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dr.result=function(t,e,n){var r=-1,o=(e=Ji(e,t)).length;for(o||(o=1,t=i);++r<o;){var u=null==t?i:t[pu(e[r])];u===i&&(r=o,u=n),t=Os(u)?u.call(t):u}return t},dr.round=Xa,dr.runInContext=t,dr.sample=function(t){return(ws(t)?Or:Oi)(t)},dr.size=function(t){if(null==t)return 0;if(Ss(t))return Ps(t)?Hn(t):t.length;var e=Vo(t);return e==Z||e==rt?t.size:hi(t).length},dr.snakeCase=Ea,dr.some=function(t,e,n){var r=ws(t)?gn:Ui;return n&&Zo(t,e,n)&&(e=i),r(t,Go(e,3))},dr.sortedIndex=function(t,e){return ki(t,e)},dr.sortedIndexBy=function(t,e,n){return Ri(t,e,Go(n,2))},dr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ki(t,e);if(r<n&&ds(t[r],e))return r}return-1},dr.sortedLastIndex=function(t,e){return ki(t,e,!0)},dr.sortedLastIndexBy=function(t,e,n){return Ri(t,e,Go(n,2),!0)},dr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ki(t,e,!0)-1;if(ds(t[n],e))return n}return-1},dr.startCase=Ca,dr.startsWith=function(t,e,n){return t=qs(t),n=null==n?0:Pr(zs(n),0,t.length),e=Gi(e),t.slice(n,n+e.length)==e},dr.subtract=tc,dr.sum=function(t){return t&&t.length?Ln(t,Ma):0},dr.sumBy=function(t,e){return t&&t.length?Ln(t,Go(e,2)):0},dr.template=function(t,e,n){var r=dr.templateSettings;n&&Zo(t,e,n)&&(e=i),t=qs(t),e=Qs({},e,r,No);var o,u,s=Qs({},e.imports,r.imports,No),c=sa(s),f=Tn(s,c),l=0,h=e.interpolate||Qt,p="__p += '",v=re((e.escape||Qt).source+"|"+h.source+"|"+(h===Nt?Ht:Qt).source+"|"+(e.evaluate||Qt).source+"|$","g"),g="//# sourceURL="+(le.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Re+"]")+"\n";t.replace(v,(function(e,n,r,i,s,a){return r||(r=i),p+=t.slice(l,a).replace(Yt,Rn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(u=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=a+e.length,e})),p+="';\n";var d=le.call(e,"variable")&&e.variable;if(d){if(Ft.test(d))throw new Xt(a)}else p="with (obj) {\n"+p+"\n}\n";p=(u?p.replace(wt,""):p).replace(bt,"$1").replace(St,"$1;"),p="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Aa((function(){return te(c,g+"return "+p).apply(i,f)}));if(y.source=p,Ls(y))throw y;return y},dr.times=function(t,e){if((t=zs(t))<1||t>U)return[];var n=P,r=Jn(t,P);e=Go(e),t-=P;for(var i=On(r,e);++n<t;)e(n);return i},dr.toFinite=Hs,dr.toInteger=zs,dr.toLength=Vs,dr.toLower=function(t){return qs(t).toLowerCase()},dr.toNumber=Ks,dr.toSafeInteger=function(t){return t?Pr(zs(t),-U,U):0===t?t:0},dr.toString=qs,dr.toUpper=function(t){return qs(t).toUpperCase()},dr.trim=function(t,e,n){if((t=qs(t))&&(n||e===i))return An(t);if(!t||!(e=Gi(e)))return t;var r=zn(t),o=zn(e);return Qi(r,xn(r,o),Mn(r,o)+1).join("")},dr.trimEnd=function(t,e,n){if((t=qs(t))&&(n||e===i))return t.slice(0,Vn(t)+1);if(!t||!(e=Gi(e)))return t;var r=zn(t);return Qi(r,0,Mn(r,zn(e))+1).join("")},dr.trimStart=function(t,e,n){if((t=qs(t))&&(n||e===i))return t.replace(kt,"");if(!t||!(e=Gi(e)))return t;var r=zn(t);return Qi(r,xn(r,zn(e))).join("")},dr.truncate=function(t,e){var n=O,r=A;if(Ts(e)){var o="separator"in e?e.separator:o;n="length"in e?zs(e.length):n,r="omission"in e?Gi(e.omission):r}var u=(t=qs(t)).length;if(Pn(t)){var s=zn(t);u=s.length}if(n>=u)return t;var a=n-Hn(r);if(a<1)return r;var c=s?Qi(s,0,a).join(""):t.slice(0,a);if(o===i)return c+r;if(s&&(a+=c.length-a),ks(o)){if(t.slice(a).search(o)){var f,l=c;for(o.global||(o=re(o.source,qs(zt.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var h=f.index;c=c.slice(0,h===i?a:h)}}else if(t.indexOf(Gi(o),a)!=a){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},dr.unescape=function(t){return(t=qs(t))&&It.test(t)?t.replace(Et,Kn):t},dr.uniqueId=function(t){var e=++he;return qs(t)+e},dr.upperCase=Ia,dr.upperFirst=La,dr.each=qu,dr.eachRight=Ju,dr.first=Su,Pa(dr,(Qa={},Zr(dr,(function(t,e){le.call(dr.prototype,e)||(Qa[e]=t)})),Qa),{chain:!1}),dr.VERSION="4.17.21",on(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){dr[t].placeholder=dr})),on(["drop","take"],(function(t,e){wr.prototype[t]=function(n){n=n===i?1:qn(zs(n),0);var r=this.__filtered__&&!e?new wr(this):this.clone();return r.__filtered__?r.__takeCount__=Jn(n,r.__takeCount__):r.__views__.push({size:Jn(n,P),type:t+(r.__dir__<0?"Right":"")}),r},wr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),on(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=n==j||3==n;wr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Go(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),on(["head","last"],(function(t,e){var n="take"+(e?"Right":"");wr.prototype[t]=function(){return this[n](1).value()[0]}})),on(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");wr.prototype[t]=function(){return this.__filtered__?new wr(this):this[n](1)}})),wr.prototype.compact=function(){return this.filter(Ma)},wr.prototype.find=function(t){return this.filter(t).head()},wr.prototype.findLast=function(t){return this.reverse().find(t)},wr.prototype.invokeMap=Li((function(t,e){return"function"==typeof t?new wr(this):this.map((function(n){return ui(n,t,e)}))})),wr.prototype.reject=function(t){return this.filter(ls(Go(t)))},wr.prototype.slice=function(t,e){t=zs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new wr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=zs(e))<0?n.dropRight(-e):n.take(e-t)),n)},wr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},wr.prototype.toArray=function(){return this.take(P)},Zr(wr.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=dr[r?"take"+("last"==e?"Right":""):e],u=r||/^find/.test(e);o&&(dr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,a=e instanceof wr,c=s[0],f=a||ws(e),l=function(t){var e=o.apply(dr,hn([t],s));return r&&h?e[0]:e};f&&n&&"function"==typeof c&&1!=c.length&&(a=f=!1);var h=this.__chain__,p=!!this.__actions__.length,v=u&&!h,g=a&&!p;if(!u&&f){e=g?e:new wr(this);var d=t.apply(e,s);return d.__actions__.push({func:Hu,args:[l],thisArg:i}),new mr(d,h)}return v&&g?t.apply(this,s):(d=this.thru(l),v?r?d.value()[0]:d.value():d)})})),on(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ue[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);dr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ws(i)?i:[],t)}return this[n]((function(n){return e.apply(ws(n)?n:[],t)}))}})),Zr(wr.prototype,(function(t,e){var n=dr[e];if(n){var r=n.name+"";le.call(sr,r)||(sr[r]=[]),sr[r].push({name:e,func:n})}})),sr[yo(i,_).name]=[{name:"wrapper",func:i}],wr.prototype.clone=function(){var t=new wr(this.__wrapped__);return t.__actions__=oo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=oo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=oo(this.__views__),t},wr.prototype.reverse=function(){if(this.__filtered__){var t=new wr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},wr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ws(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=Jn(e,t+u);break;case"takeRight":t=qn(t,e-u)}}return{start:t,end:e}}(0,i,this.__views__),u=o.start,s=o.end,a=s-u,c=r?s:u-1,f=this.__iteratees__,l=f.length,h=0,p=Jn(a,this.__takeCount__);if(!n||!r&&i==a&&p==a)return zi(t,this.__actions__);var v=[];t:for(;a--&&h<p;){for(var g=-1,d=t[c+=e];++g<l;){var y=f[g],_=y.iteratee,m=y.type,w=_(d);if(m==x)d=w;else if(!w){if(m==j)continue t;break t}}v[h++]=d}return v},dr.prototype.at=zu,dr.prototype.chain=function(){return Wu(this)},dr.prototype.commit=function(){return new mr(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===i&&(this.__values__=Ws(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},dr.prototype.plant=function(t){for(var e,n=this;n instanceof _r;){var r=gu(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},dr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof wr){var e=t;return this.__actions__.length&&(e=new wr(this)),(e=e.reverse()).__actions__.push({func:Hu,args:[Tu],thisArg:i}),new mr(e,this.__chain__)}return this.thru(Tu)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return zi(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,Oe&&(dr.prototype[Oe]=function(){return this}),dr}();ze._=$n,(r=function(){return $n}.call(e,n,e,t))===i||(t.exports=r)}.call(this)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};return(()=>{"use strict";n.r(r),n.d(r,{InteractionEngine:()=>kt,InteractionEventNames:()=>Mt,InteractionMessageTypes:()=>Rt});var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};var e=function(){return e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){u.label=s[1];break}if(6===s[0]&&u.label<i[1]){u.label=i[1],i=s;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(s);break}i[2]&&u.ops.pop(),u.trys.pop();continue}s=e.call(t,u)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}Object.create;Object.create;var u,s,a,c,f=n(204),l=n.n(f),h=n(889),p=0,v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],g=window.WebSocket,d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(){return y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},y.apply(this,arguments)},_={wv:"im:0,au:0,sy:0"},m={canSendBeforeAuth:!1,timeout:6e4};!function(t){t[t.LWP_AUTH_NOT_READY=510]="LWP_AUTH_NOT_READY",t[t.CONNECT_UNAVAILABLE=511]="CONNECT_UNAVAILABLE",t[t.LOCAL_TIMEOUT=508]="LOCAL_TIMEOUT"}(u||(u={})),function(t){t[t.NOT_AUTHED=401]="NOT_AUTHED",t[t.HANDLER_NOT_FOUND=400]="HANDLER_NOT_FOUND",t[t.TIMEOUT=408]="TIMEOUT",t[t.BIZ_ERR=500]="BIZ_ERR"}(s||(s={})),function(t){t[t.INITED=0]="INITED",t[t.CONNECTING=1]="CONNECTING",t[t.SILENT_CONNECTING=2]="SILENT_CONNECTING",t[t.OPENED=3]="OPENED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"}(a||(a={})),function(t){t[t.INITED=0]="INITED",t[t.REGED=1]="REGED",t[t.REG_FAILED=2]="REG_FAILED",t[t.SUBSCRIBING=3]="SUBSCRIBING",t[t.SUBSCRIBED=4]="SUBSCRIBED",t[t.REFRESH_TOKEN=5]="REFRESH_TOKEN",t[t.SUBSCRIBE_FAILED=6]="SUBSCRIBE_FAILED"}(c||(c={}));var w=function(t){function e(e,n){var r=t.call(this)||this;return r.name=e,r.option=n,r.pendingMsgs={},r.waitingReconnectMsgs={},r.msgTimerCache={},r.authState=c.INITED,r.connectState=a.CLOSED,r.localLog=n.log,r.tryConnectTime=0,r.isConnecting=!1,r.pushHandlerCache={},r.lwpDefaultHeaders=n.lwpHeadersConfig||_,r.paasDomain="",r}return d(e,t),e.prototype.connect=function(){this.setConnectState(a.INITED),this.setAuthState(c.INITED),this.tryConnectTime=0,this._connect()},e.prototype.setCloundPaasSign=function(t){this.lwpDefaultHeaders.sign=t},e.prototype.setAuthInfo=function(t){return this.authState===c.SUBSCRIBE_FAILED?(this.authInfo=t,this.auth()):Promise.reject("auth state is not subscribe_failed when set auth info")},e.prototype.getPaasDomain=function(){return this.paasDomain},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.getClientOption=function(){return Object.assign({},this.option)},e.prototype.clearAuthInfo=function(){this.authInfo=void 0,!0!==this.option.disableWsAuthConnect?this._connect():this.pingTimer&&clearTimeout(this.pingTimer),this.setAuthState(c.INITED)},e.prototype.initDevicePush=function(){return this.sendMsg("/reg/init",{},null,{canSendBeforeAuth:!0})},e.prototype.registerPushHandler=function(t,e){if(this.pushHandlerCache[t])throw new Error("you have register this topic before: "+t);this.pushHandlerCache[t]=e},e.prototype.removePushHandler=function(t){delete this.pushHandlerCache[t]},e.prototype.close=function(){this.setConnectState(a.CLOSED),this.wsInstance&&this.wsInstance.close()},e.prototype.sendMsg=function(t,e,n,r){var i=this;void 0===e&&(e={}),void 0===r&&(r=m);var o,s,f,l=Object.assign({},e,{mid:(o=Math.floor(Math.random()*Math.pow(2,16)),s=p++,f="",f+=v[o>>12&15],f+=v[o>>8&15],f+=v[o>>4&15],f+=v[15&o],f+=v[s>>12&15],f+=v[s>>8&15],f+=v[s>>4&15],(f+=v[15&s])+" 0")}),h=this.getMsgId(l.mid),g=!1;!0===r.canSendBeforeReg?g=!0:!0!==r.canSendBeforeAuth||this.authState!==c.REGED&&this.authState!==c.SUBSCRIBING&&this.authState!==c.SUBSCRIBE_FAILED&&this.authState!==c.SUBSCRIBED?this.authState===c.SUBSCRIBED&&(g=!0):g=!0;var d={lwp:t,headers:l,body:n,option:r};return new Promise((function(t,e){if(g)if(i.connectState===a.OPENED){try{i.sendRawMsg({lwp:d.lwp,headers:d.headers,body:d.body}),i.pendingMsgs[h]={request:d,resolve:t,reject:e}}catch(n){i.waitingReconnectMsgs[h]={request:d,resolve:t,reject:e}}i.setupTimeoutTimer(h,d.option.timeout)}else i.connectState===a.SILENT_CONNECTING?(i.waitingReconnectMsgs[h]={request:d,resolve:t,reject:e},i.setupTimeoutTimer(h,d.option.timeout)):e({code:u.CONNECT_UNAVAILABLE,body:{reason:"connect is unavailable"}});else e({code:u.LWP_AUTH_NOT_READY,body:{reason:"lwp auth not ready"}})}))},e.prototype.sendRawMsg=function(t){if(!this.wsInstance)throw new Error("wsInstance is not exist");this.wsInstance.send(JSON.stringify({code:t.code,lwp:t.lwp,headers:t.headers,body:t.body}))},e.prototype.flushWaitingMsgs=function(){var t=this,e=Object.keys(this.waitingReconnectMsgs);e.length&&e.forEach((function(e){var n=t.waitingReconnectMsgs[e];if(n){var r=n.request,i=n.resolve,o=n.reject,u=r.lwp,s=r.headers,a=r.body,c=r.option;delete t.waitingReconnectMsgs[e],t.sendMsg(u,s,a,c).then(i,o)}}))},e.prototype.rejectPendingMsgs=function(){var t=this,e=Object.keys(this.pendingMsgs);e.length&&e.forEach((function(e){var n=t.pendingMsgs[e];if(n){n.reject({code:u.CONNECT_UNAVAILABLE,body:{reason:"connect is unavailable"}});var r=t.msgTimerCache[e];r&&clearTimeout(r),delete t.msgTimerCache[e],delete t.pendingMsgs[e]}}))},e.prototype.setupTimeoutTimer=function(t,e){var n=this;e||(e=m.timeout),e<0&&(e=m.timeout),e>36e5&&(e=36e5);var r={code:u.LOCAL_TIMEOUT,body:{reason:"timeout by local"}},i=setTimeout((function(){var e=n.pendingMsgs[t],i=n.waitingReconnectMsgs[t];e&&e.reject(r),i&&i.reject(r),delete n.pendingMsgs[t],delete n.waitingReconnectMsgs[t],delete n.msgTimerCache[t]}),e);this.msgTimerCache[t]=i},e.prototype._connect=function(){var t=this;this.connectState!==a.CLOSED&&this.connectState!==a.CLOSING&&!0!==this.isConnecting&&(this.isConnecting=!0,this.tryConnectTime<5?this.setConnectState(a.SILENT_CONNECTING):this.setConnectState(a.CONNECTING),this.openWs().then((function(e){t.isConnecting=!1,t.wsInstance=e,t.bindWSEvent(e),t.setConnectState(a.OPENED),t.reg(),t.tryConnectTimer&&clearTimeout(t.tryConnectTimer)})).catch((function(e){t.isConnecting=!1,t.localLog.error("lwp client",t.name,"open ws error",e),t.tryConnectTime++,t.tryConnectTimer&&clearTimeout(t.tryConnectTimer),t.tryConnectTimer=setTimeout((function(){t._connect()}),Math.min(100*Math.pow(2,t.tryConnectTime),5e3))})))},e.prototype.reg=function(){var t=this,e=y({"cache-header":"token app-key did ua vhost wv scm_project",vhost:"WK",ua:this.option.ua,"app-key":this.option.appKey,did:this.option.deviceId,dt:"j"},this.lwpDefaultHeaders);this.option.scmProject&&(e.scm_project=this.option.scmProject),!0!==this.option.paasProject&&void 0!==e.sign&&delete e.sign,!0===this.option.isAssistant&&(e.token=this.option.accessToken||"",e.subscribe="false"),this.localLog.info("lwpclient",this.name,"start reg"),this.sendMsg("/reg",e,null,{canSendBeforeReg:!0,timeout:15e3}).then((function(){t.authState!==c.SUBSCRIBED&&t.setAuthState(c.REGED),t.localLog.info("lwpclinet",t.name,"reg success"),!0!==t.option.isAssistant?(!0!==t.option.paasProject&&t.initDevicePush(),t.auth().catch((function(){!0!==t.option.paasProject&&t.localLog.info("lwpclinet",t.name,"auth fail")}))):t.flushWaitingMsgs()})).catch((function(e){!0!==t.option.isAssistant||!e||400!==e.code&&401!==e.code?t.setAuthState(c.REG_FAILED):t.setAuthState(c.REGED),t.localLog.error("lwpclinet",t.name,"reg fail",JSON.stringify(e),e.stack)}))},e.prototype.auth=function(){var t=this;if(this.setAuthState(c.SUBSCRIBING),this.authInfo){var e=y({token:this.authInfo.accessToken,sync:"0,0;0;0;","set-ver":"0",dt:"j"},this.lwpDefaultHeaders);return!0===this.option.paasProject?delete e["set-ver"]:void 0!==e.sign&&delete e.sign,this.sendMsg("/reg",e,null,{canSendBeforeAuth:!0}).then((function(e){t.option.paasProject&&e&&e.headers&&e.headers["reg-uid"]&&(t.paasDomain=e.headers["reg-uid"].split("@")[1]),t.setAuthState(c.SUBSCRIBED),t.flushWaitingMsgs()})).catch((function(e){return t.setAuthState(c.SUBSCRIBE_FAILED),t.flushWaitingMsgs(),Promise.reject(e)}))}return this.setAuthState(c.SUBSCRIBE_FAILED),this.flushWaitingMsgs(),Promise.reject("auth info is null")},e.prototype.bindWSEvent=function(t){var e=this;t.onmessage=function(t){e.receiveMsgEvent(t)},t.onclose=function(n){e.wsInstance===t&&(!0!==e.option.disableWsAuthConnect?e._connect():e.clearAuthInfo())},t.onerror=function(t){e.localLog.error("lwpclient onerror",t)}},e.prototype.getMsgId=function(t){return t.split(" ")[0]},e.prototype.receiveMsgEvent=function(t){var e,n=this;if("string"==typeof t.data){try{e=JSON.parse(t.data)}catch(e){return void this.localLog.error("lwpclient: ",this.name+" parse json error :"+t.data)}if(e.code&&e.headers){var r=Object.assign({},e),i=(r.headers&&r.headers.mid||"").split(" ")[0],o=this.pendingMsgs[i];if(o){if(102===r.code)return o.reponseBodyList||(o.reponseBodyList=[]),void o.reponseBodyList.push(r.body);200===r.code?o.reponseBodyList&&o.reponseBodyList.length?o.resolve(y(y({},r),{reponseBodyList:o.reponseBodyList})):o.resolve(r):o.reject(r);var u=this.msgTimerCache[i];u&&clearTimeout(u),delete this.msgTimerCache[i],delete this.pendingMsgs[i]}}else if(e.lwp&&e.headers){var a=Object.assign({},e),c=a.lwp,f=a.headers.mid,l=this.pushHandlerCache[c],h=function(t){var e=Object.assign({},t.headers||{},{mid:f});n.sendRawMsg({code:t.code,headers:e,body:t.body})};l?l(a).then((function(t){h(t)})).catch((function(t){h({code:s.BIZ_ERR,headers:{},body:null})})):h("/s/msg"===c?{code:200,headers:{},body:{}}:{code:s.HANDLER_NOT_FOUND,headers:{},body:null})}else this.localLog.error("receive unexpected msg: "+t.data)}this.pingTimer&&clearTimeout(this.pingTimer),this.pingTimer=setTimeout((function(){n.ping()}),15e3)},e.prototype.ping=function(){var t=this;this.sendMsg("/!",{},null,{timeout:1e4,canSendBeforeReg:!0}).then((function(){}),(function(e){t.localLog.info("lwpclient","ws: "+t.name+"ping 检查失败 :",e),t.authState!==c.INITED&&(t.rejectPendingMsgs(),t._connect())}))},e.prototype.openWs=function(){var t=this;return new Promise((function(e,n){var r,i,o=setTimeout((function(){n(new Error("timeout"))}),5e3);try{i=t.option.wsUrl,t.option.ua,r=new g(i)}catch(t){return void n(t)}r.onopen=function(){clearTimeout(o),e(r)},r.onclose=function(t){clearTimeout(o),n(new Error(t.reason))},r.onerror=function(t){clearTimeout(o),n(new Error(JSON.stringify(t)))}}))},e.prototype.setAuthState=function(t){t!==this.authState&&(this.authState=t,this.emit(e.EventsName.AuthStateChange,t))},e.prototype.setConnectState=function(t){t!==this.connectState&&(this.connectState=t,this.emit(e.EventsName.ConnectStateChange,t))},e.EventsName={AuthStateChange:"AuthStateChange",ConnectStateChange:"ConnectStateChange"},e}(l().EventEmitter);let b=null;const S=(t,e)=>{if(b)throw new Error("Cannot init lwp client more than once");b=new w(t,e),{sendMsg:(t,e,n)=>{const r={};return-1!==["/r/Adaptor/QrcodeI/generateForLwpQr","/r/Adaptor/QrcodeI/qrcodeLoginForLwp"].indexOf(t)&&(r.canSendBeforeAuth=!0),b?b.sendMsg(t,e,n,r):Promise.reject("lwp client is null")}}},E=()=>b,C=()=>{if(!b)throw new Error("must connect after init");b.connect()};const I=new class{constructor(t){this.handlePush=t=>{let e=Promise.resolve();if(t.body&&t.body[1]&&t.body[1][6]){const n=t.body[1][6];Array.isArray(n)&&n.length>0&&(e=n.reduce(((t,e)=>t.then((()=>{const t=e[1],n=e[2],r=this.syncHandlers[t+""];return r?r((0,h.decodeFromB64)(n)):void 0}))),e))}return e.then((()=>({code:200,headers:{},body:null})))},this.topicName=t,this.syncHandlers={}}registerSyncItemHandler(t,e){this.syncHandlers[t+""]=e}clearSyncItemHandler(t){this.syncHandlers[t+""]=void 0}}("/s/syncDev");let L=!1;const O=()=>{const t=E();if(!t)throw new Error("initDeviceSync must after initLWPClient");!1===L&&(t.registerPushHandler(I.topicName,I.handlePush),L=!0)};const A=t=>{O();const e=E();return e?e.setAuthInfo({accessToken:t.accessToken,refreshToken:t.refreshToken,expiredTime:t.accessTokenExpiredTime,openId:t.openId}).then((()=>({success:!0,openId:t.openId,authInfo:{accessToken:t.accessToken,refreshToken:t.refreshToken,expiredTime:t.accessTokenExpiredTime}}))):Promise.resolve({success:!1,reason:"lwp client is null",errorCode:"10001"})};var N;!function(t){t[t.NOT_LOGINED=0]="NOT_LOGINED",t[t.LOGINED=1]="LOGINED"}(N||(N={})),N.NOT_LOGINED;class T extends l().EventEmitter{constructor(){super(),this.client=null,this.EventsName={LoginStatusChange:"LoginStatusChange"},this._loginResult={status:N.NOT_LOGINED,openId:null},this.init()}get loginResult(){return this._loginResult}init(){if(this.client=E(),!this.client)throw new Error("cannot find client when init LoginStatus module");{const t=this.getNewLoginResult(this.client.authState);this._loginResult=t,this.client.addListener(w.EventsName.AuthStateChange,(t=>{const e=this.getNewLoginResult(t);e.status!==this._loginResult.status&&(this._loginResult=e,this.emit(this.EventsName.LoginStatusChange,this._loginResult))}))}}getNewLoginResult(t){if(this.transformLoginStatus(t)===N.LOGINED&&this.client){const t=this.client.getAuthInfo();if(t&&t.openId)return{status:N.LOGINED,openId:t.openId};throw new Error("lwpclient authstate is subscribed, but no openid in authInfo")}return{status:N.NOT_LOGINED,openId:null}}transformLoginStatus(t){return t===c.SUBSCRIBED?N.LOGINED:N.NOT_LOGINED}}var j,x=new Uint8Array(16);function M(){if(!j&&!(j=void 0!==crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return j(x)}const U=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const k=function(t){return"string"==typeof t&&U.test(t)};for(var R=[],P=0;P<256;++P)R.push((P+256).toString(16).substr(1));const D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(R[t[e+0]]+R[t[e+1]]+R[t[e+2]]+R[t[e+3]]+"-"+R[t[e+4]]+R[t[e+5]]+"-"+R[t[e+6]]+R[t[e+7]]+"-"+R[t[e+8]]+R[t[e+9]]+"-"+R[t[e+10]]+R[t[e+11]]+R[t[e+12]]+R[t[e+13]]+R[t[e+14]]+R[t[e+15]]).toLowerCase();if(!k(n))throw TypeError("Stringified UUID is invalid");return n};const G=function(t,e,n){var r=(t=t||{}).random||(t.rng||M)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return D(r)};var B,F,W=n(392);(F=B||(B={})).PaaSConnectionChanged="paas_connection_changed",F.PaaSConnectionError="paas_connection_error",F.PaaSAuthStateChanged="paas_authState_changed",F.LWPConnectStateChange="LWPConnectStateChange",F.PaaSOtherEvent="paas_event_others";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var H,z=function(){return z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},z.apply(this,arguments)};function V(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function K(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $,q,J,Z=function(t,e,n){if(H&&H.sendMsg)return H.sendMsg(t,e,n);throw new Error("rpc is null, must init rpc first")};!function(t){t[t.CONN_UNCONNECTED=0]="CONN_UNCONNECTED",t[t.CONN_CONNECTING=1]="CONN_CONNECTING",t[t.CONN_CONNECTED=2]="CONN_CONNECTED",t[t.CONN_AUTHING=3]="CONN_AUTHING",t[t.CONN_AUTHED=4]="CONN_AUTHED",t[t.CONN_ERROR=5]="CONN_ERROR"}($||($={})),function(t){t[t.INITED=0]="INITED",t[t.REGED=1]="REGED",t[t.REG_FAILED=2]="REG_FAILED",t[t.SUBSCRIBING=3]="SUBSCRIBING",t[t.SUBSCRIBED=4]="SUBSCRIBED",t[t.REFRESH_TOKEN=5]="REFRESH_TOKEN",t[t.SUBSCRIBE_FAILED=6]="SUBSCRIBE_FAILED"}(q||(q={})),function(t){t[t.INITED=0]="INITED",t[t.CONNECTING=1]="CONNECTING",t[t.SILENT_CONNECTING=2]="SILENT_CONNECTING",t[t.OPENED=3]="OPENED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"}(J||(J={}));var Q,Y=function(){function t(){var t=this;this.innerConnectionStatus=$.CONN_UNCONNECTED,this.innerAuthState=q.INITED,this.lwpClient=null,this.ua="",this.domain="",window&&window.navigator?this.ua=window.navigator.userAgent:uni?uni.getSystemInfo({success:function(e){t.ua="".concat(e.osName," ").concat(e.osVersion||""," ").concat(e.deviceType)}}):wx&&wx.getSystemInfo({success:function(e){t.ua="".concat(e.system," wechat ").concat(e.version||""," ").concat(e.model||"")}})}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},Object.defineProperty(t.prototype,"ConnectionStatus",{get:function(){return this.innerConnectionStatus},set:function(t){this.innerConnectionStatus=t,At.getEventService().emit(B.PaaSConnectionChanged,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AuthState",{get:function(){return this.innerAuthState},set:function(t){this.innerAuthState=t,At.getEventService().emit(B.PaaSAuthStateChanged,t)},enumerable:!1,configurable:!0}),t.prototype.isNetworkAvailable=function(){return!0},t.prototype.getConnectionStatus=function(){return this.ConnectionStatus},t.prototype.authState=function(){return this.AuthState},t.prototype.sendMsg=function(t,e,n){return V(this,void 0,void 0,(function(){var r;return K(this,(function(i){return this.lwpClient?(r=Date.now(),[2,this.lwpClient.sendMsg(t,e,n,{timeout:15e3}).catch((function(e){var n=Date.now()-r;return At.getLoggerService().error(Q.ERROR,"[rpc] catch ".concat(n,"ms"),t,e),e&&e.code&&(510===e.code||511===e.code)&&At.getEventService().emit(B.PaaSConnectionError,e.code),Promise.reject(e)}))]):[2,Promise.reject("lwpClient is null")]}))}))},t.prototype.login=function(t){return V(this,void 0,void 0,(function(){var e,n,r,i,o,u=this;return K(this,(function(s){return(e=At.getSettingService().get()).debug,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["debug"]),r=0,i=!0,this.lwpClient?(C(),console.log("存在lwpClient，调用了lwpConnect"),this.ConnectionStatus=$.CONN_CONNECTED,[2]):(this.ConnectionStatus=$.CONN_CONNECTING,o={appKey:n.appKey,wsUrl:n.wsUrl||"wss://wss.im.dingtalk.cn",ua:"".concat(this.ua," AppName/VPaasSDK AppVer/").concat(At.getAppVersion()),deviceId:n.deviceId,lwpHeadersConfig:{wv:"im:3,au:3,sy:6"},log:n.log,disableWsAuthConnect:!0,paasProject:!0},n.subscribeServerPush&&o.lwpHeadersConfig&&(o.lwpHeadersConfig["subscribe-server-push"]=n.subscribeServerPush),this.ConnectionStatus=$.CONN_AUTHING,S(n.appName||"browser demo",o),C(),console.log("initLWPClient，调用了lwpConnect"),this.lwpClient=E(),this.lwpClient&&(this.ConnectionStatus=$.CONN_CONNECTED,this.lwpClient.addListener(w.EventsName.AuthStateChange,(function(e){return V(u,void 0,void 0,(function(){var n,o,u,s,a,f;return K(this,(function(l){switch(l.label){case 0:switch(console.log("AuthStateChange",e),this.AuthState=e,e){case c.INITED:return[3,1];case c.REFRESH_TOKEN:return[3,2];case c.SUBSCRIBE_FAILED:return[3,3];case c.SUBSCRIBED:return[3,14]}return[3,15];case 1:case 2:return this.ConnectionStatus=$.CONN_UNCONNECTED,[3,16];case 3:if(!(r<4&&i))return[3,12];r++,this.ConnectionStatus=$.CONN_AUTHING,l.label=4;case 4:return l.trys.push([4,10,,11]),[4,At.getSettingService().get().authTokenCallback()];case 5:n=l.sent(),l.label=6;case 6:return l.trys.push([6,8,,9]),At.getCloudVersion()&&(o=(0,W.get)(n,"uid",0)||t)&&(n.openId=o),n.accessToken?(n.openId||(n.openId=t||""),[4,A(n)]):(At.getLoggerService().error(Q.ERROR,"authTokenCallback catch",n),[2]);case 7:return l.sent(),this.myUid=n.openId?n.openId+"":void 0,r=0,(u=null===(f=(0,W.get)(this.lwpClient,"getPaasDomain",null))||void 0===f?void 0:f.bind(this.lwpClient))&&(this.domain=u()||""),[3,9];case 8:return s=l.sent(),i=!(!s.body||"4000001"!==s.body.code||401!==s.code),At.getLoggerService().error(Q.ERROR,"PaaS login catch",s),[3,9];case 9:return[3,11];case 10:return a=l.sent(),At.getLoggerService().error(Q.ERROR,"authTokenCallback catch",a),this.ConnectionStatus=$.CONN_ERROR,[3,11];case 11:return[3,13];case 12:this.ConnectionStatus=$.CONN_ERROR,At.getLoggerService().error(Q.ERROR,"PaaS login error"),l.label=13;case 13:return[3,16];case 14:return this.ConnectionStatus=$.CONN_AUTHED,[3,16];case 15:return[3,16];case 16:return[2]}}))}))})),this.lwpClient.addListener(w.EventsName.ConnectStateChange,(function(t){At.getEventService().emit(B.LWPConnectStateChange,t)})),At.getEventService().registerSyncPushHandler(this.lwpClient),a={sendMsg:this.sendMsg.bind(this)},H=a),[2]);var a}))}))},t.prototype.logout=function(){return this.lwpClient&&(this.lwpClient.clearAuthInfo(),console.log("调用了clearAuthInfo"),this.ConnectionStatus=$.CONN_UNCONNECTED),Promise.resolve()},t.prototype.kickout=function(){return Promise.resolve()},t.prototype.getMyOpenId=function(){return this.myUid},t.prototype.getDeviceId=function(t){var e="aui_paas_did",n="aui_paas_tab_id",r=At.getStorageService().get(e,!0),i=sessionStorage.getItem(n);return(!r||r.indexOf("-")>0)&&(r=G().replace(/-/g,""),At.getStorageService().set(e,r,!0)),i||(i=Date.now()+"",sessionStorage.setItem(n,i)),t?r:"".concat(r,"-").concat(i)},t.prototype.getDomain=function(){return this.domain},t}();!function(t){t.INFO="INFO",t.ERROR="ERROR"}(Q||(Q={}));var X,tt=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.info=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logFn||(this.logFn=At.getSettingService().get().log),(t=this.logFn).info.apply(t,e)},t.prototype.error=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logFn||(this.logFn=At.getSettingService().get().log),(t=this.logFn).error.apply(t,e)},t}(),et={exports:{}},nt="object"==typeof Reflect?Reflect:null,rt=nt&&"function"==typeof nt.apply?nt.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};X=nt&&"function"==typeof nt.ownKeys?nt.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var it=Number.isNaN||function(t){return t!=t};function ot(){ot.init.call(this)}et.exports=ot,et.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}gt(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&gt(t,"error",e,{once:!0})}(t,i)}))},ot.EventEmitter=ot,ot.prototype._events=void 0,ot.prototype._eventsCount=0,ot.prototype._maxListeners=void 0;var ut=10;function st(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function at(t){return void 0===t._maxListeners?ot.defaultMaxListeners:t._maxListeners}function ct(t,e,n,r){var i,o,u,s;if(st(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),u=o[e]),void 0===u)u=o[e]=n,++t._eventsCount;else if("function"==typeof u?u=o[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(i=at(t))>0&&u.length>i&&!u.warned){u.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=u.length,s=a,console&&console.warn&&console.warn(s)}return t}function ft(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lt(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=ft.bind(r);return i.listener=n,r.wrapFn=i,i}function ht(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):vt(i,i.length)}function pt(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function vt(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function gt(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return ut},set:function(t){if("number"!=typeof t||t<0||it(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ut=t}}),ot.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ot.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||it(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},ot.prototype.getMaxListeners=function(){return at(this)},ot.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)rt(s,this,e);else{var a=s.length,c=vt(s,a);for(n=0;n<a;++n)rt(c[n],this,e)}return!0},ot.prototype.addListener=function(t,e){return ct(this,t,e,!1)},ot.prototype.on=ot.prototype.addListener,ot.prototype.prependListener=function(t,e){return ct(this,t,e,!0)},ot.prototype.once=function(t,e){return st(e),this.on(t,lt(this,t,e)),this},ot.prototype.prependOnceListener=function(t,e){return st(e),this.prependListener(t,lt(this,t,e)),this},ot.prototype.removeListener=function(t,e){var n,r,i,o,u;if(st(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){u=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,u||e)}return this},ot.prototype.off=ot.prototype.removeListener,ot.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},ot.prototype.listeners=function(t){return ht(this,t,!0)},ot.prototype.rawListeners=function(t){return ht(this,t,!1)},ot.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):pt.call(t,e)},ot.prototype.listenerCount=pt,ot.prototype.eventNames=function(){return this._eventsCount>0?X(this._events):[]};var dt,yt=et.exports,_t=function(){function t(t,e){var n=this;this.syncHandlers={},this.topicName=t,e&&Object.keys(e).forEach((function(t){n.registerHandler(parseInt(t,10),e[t])})),this.handlePush=this.handlePush.bind(this)}return t.prototype.registerHandler=function(t,e){this.syncHandlers[t+""]=e},t.prototype.unRegisterHandler=function(t){delete this.syncHandlers[t+""]},t.prototype.handlePush=function(e){return V(this,void 0,void 0,(function(){var n,r=this;return K(this,(function(i){return n=e.body,setTimeout((function(){n.SyncPushPackage&&Array.isArray(n.SyncPushPackage.Data)&&n.SyncPushPackage.Data.forEach((function(e){var n=e.BizType,i=e.Data,o=e.ObjectType;if(i&&o&&n)try{var u="string"==typeof i?t.decodeJsonFromBase64(i):i,s=r.syncHandlers[o+""];s&&s(u)}catch(t){At.getLoggerService().error("error at decode64 ".concat(o),t)}}))}),0),[2,{code:200,headers:{},body:null}]}))}))},t.decodeJsonFromBase64=function(t){return JSON.parse(decodeURIComponent(Array.prototype.map.call(atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))},t}(),mt=Object.values(B),wt=[],bt=function(){function t(){this.emitter=new yt.EventEmitter}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.register=function(t){var e=this;return mt.forEach((function(n){e.emitter.addListener(n,t)})),function(){mt.forEach((function(n){e.emitter.removeListener(n,t)}))}},t.prototype.unRegister=function(){this.emitter.removeAllListeners()},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this.emitter).emit.apply(e,function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([t,t],n))},t.prototype.registerSyncPushHandler=function(e){var n=new _t("/s/para",{10001:function(e){try{t.subTypeEventsHandler(e)}catch(t){At.getLoggerService().error("error at pushHandler decode 10001",t)}return Promise.resolve()}}),r=new _t("/s/syncb",{7e4:function(e){try{t.subTypeEventsHandler(e)}catch(t){At.getLoggerService().error("error at pushHandler decode 70000",t)}return Promise.resolve()}});e.registerPushHandler(n.topicName,n.handlePush),e.registerPushHandler(r.topicName,r.handlePush)},t.subTypeEventsHandler=function(e){try{if("object"==typeof e&&e.length>0)for(var n in e)t.doEmitEvent(e[n]);else t.doEmitEvent(e)}catch(t){At.getLoggerService().error("error at subTypeEventsHandler of objectType 10001",t)}},t.doEmitEvent=function(t){var e=t.body,n=t.messageId;if(!wt.includes(n)){n&&(wt.length<1e3||wt.shift(),wt.push(n));var r,i="string"==typeof e?JSON.parse(e):e,o=i.type,u=i.roomId,s=i.senderId,a="";try{a="string"==typeof i.data?JSON.parse(i.data):i.data,r="string"==typeof i.senderInfo?JSON.parse(i.senderInfo):i.senderInfo}catch(t){a=i.data,r=i.senderInfo}var c={data:a,type:o,roomId:u,senderId:s,senderInfo:r,messageId:n};At.getEventService().emit(B.PaaSOtherEvent,c)}},t}(),St=function(){function t(){this.setting={appKey:"",mediaHost:"https://static.dingtalk.com/media",deviceId:"",appLocale:"zh_CN",deviceLocale:"zh_CN",timeZone:"Asia/Shanghai",debug:!1,log:{error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,t)},info:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.info.apply(console,t)}},authTokenCallback:function(){return Promise.resolve({})}}}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.set=function(t){if(At.getCloudVersion()&&!t.wsUrl)throw new Error("缺少参数，需要传入 连接地址");this.setting=z(z({},this.setting),t)},t.prototype.get=function(){return this.setting},t}();!function(t){t.draft="aui_paas_sdk_conv_draft",t.localLog="aui_paas_sdk_localLog"}(dt||(dt={}));var Et=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.get=function(t,e){try{var n=At.getAuthService().getMyOpenId(),r=e?t:"".concat(t,"_").concat(n);return localStorage.getItem(r)||""}catch(t){return""}},t.prototype.set=function(t,e,n){try{var r=At.getAuthService().getMyOpenId(),i=n?t:"".concat(t,"_").concat(r);return localStorage.setItem(i,e),!0}catch(t){return!1}},t}(),Ct=function(t,e){return void 0===e&&(e={}),Z("/r/IMMessageLwp/sendMessageToGroup",e,[t])},It=function(t,e){return void 0===e&&(e={}),Z("/r/IMMessageLwp/sendMessageToGroupUsers",e,[t])},Lt=function(t,e){return void 0===e&&(e={}),Z("/r/IMMessageLwp/listMessage",e,[t])},Ot=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.createGroup=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/createGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMCreateGroup]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.getGroup=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/getGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMGetGroup]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.closeGroup=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/closeGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMCloseGroup]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.joinGroup=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/joinGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMJoinGroup]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.leaveGroup=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/leaveGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMLeaveGroup]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.listGroupUser=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/listGroupUser",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMListGroupUser]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.sendMessageToGroup=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Ct(t)];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMSendMessageToGroup]",At.getLoggerService().error(n,e),n}}))}))},t.prototype.sendMessageToGroupUsers=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,It(t)];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMSendMessageToGroupUsers]",At.getLoggerService().error(n,e),n}}))}))},t.prototype.listMessage=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Lt(t)];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMListMessage]",At.getLoggerService().error(n,e),n}}))}))},t.prototype.sendLike=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMMessageLwp/sendLike",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [sendLike]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.getGroupStatistics=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/getGroupStatistics",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [getGroupStatistics]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.getGroupUserByIdList=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMGroupLwp/getGroupUserByIdList",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [getGroupUserByIdList]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.muteAll=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMMessageControlLwp/muteAll",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [muteAll]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.cancelMuteAll=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMMessageControlLwp/cancelMuteAll",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [cancelMuteAll]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.muteUser=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMMessageControlLwp/muteUser",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [muteUser]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.cancelMuteUser=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMMessageControlLwp/cancelMuteUser",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [cancelMuteUser]",At.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.listMuteUsers=function(t){return V(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Z("/r/IMMessageControlLwp/listMuteUsers",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [listMuteUsers]",At.getLoggerService().error(n,e),n}var i,o}))}))},t}(),At=function(){function t(){this.isCloud=!0,this.appVersion="0.0.1"}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setCloudVersion=function(){this.isCloud=!0},t.prototype.setAppVersion=function(t){this.appVersion=t},t.prototype.getCloudVersion=function(){return this.isCloud},t.prototype.getAppVersion=function(){return this.appVersion},t.prototype.getAuthService=function(){return Y.getInstance()},t.prototype.getLoggerService=function(){return tt.getInstance()},t.prototype.getStorageService=function(){return Et.getInstance()},t.prototype.getSettingService=function(){return St.getInstance()},t.prototype.getEventService=function(){return bt.getInstance()},t.prototype.getIMService=function(){return Ot.getInstance()},t}().getInstance();const Nt=function(){function t(){this.isJoining=!1,this.joinedMap=new Map,this.imService=At.getIMService()}return t.prototype.checkGroupId=function(t,e){if(void 0===e&&(e=!0),!t||!t.groupId)return new Error("groupId is necessary");if(e){var n=t.groupId;if(!this.joinedMap.has(n))return new Error(n+" has not yet joined")}return null},t.prototype.rejoinGroups=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return new Map(this.joinedMap).forEach((function(n,r){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.imService.joinGroup(e({groupId:r,broadCastType:0,broadCastStatistics:!1},n))];case 1:return t.sent(),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))})),[2]}))}))},t.prototype.createGroup=function(t){return this.imService.createGroup(t||{})},t.prototype.getGroup=function(t){var e=this.checkGroupId(t,!1);return e?Promise.reject(e):this.imService.getGroup(t)},t.prototype.closeGroup=function(t){var e=this.checkGroupId(t,!1);return e?Promise.reject(e):this.imService.closeGroup(t)},t.prototype.joinGroup=function(t){var e=this,n=this.checkGroupId(t,!1);if(n)return Promise.reject(n);var r=t.groupId;if(this.joinedMap.has(r))return Promise.resolve({});var i={userNick:t.userNick,userAvatar:t.userAvatar,userExtension:t.userExtension};return this.imService.joinGroup(t).then((function(){e.joinedMap.set(r,i)}))},t.prototype.leaveGroup=function(t){var e=this,n=this.checkGroupId(t,!1);if(n)return Promise.reject(n);var r=t.groupId;return this.joinedMap.has(r)?this.imService.leaveGroup(t).then((function(){e.joinedMap.delete(r)})):Promise.resolve({})},t.prototype.listGroupUser=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.listGroupUser(t)},t.prototype.sendMessageToGroup=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.sendMessageToGroup(t)},t.prototype.sendMessageToGroupUsers=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.sendMessageToGroupUsers(t)},t.prototype.sendLike=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.sendLike(t)},t.prototype.listMessage=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.listMessage(t)},t.prototype.getGroupStatistics=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.getGroupStatistics(t)},t.prototype.getGroupUserByIdList=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):Array.isArray(t.userIdList)?this.imService.getGroupUserByIdList(t):Promise.reject(new Error("please check userIdList types"))},t.prototype.muteAll=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.muteAll(t)},t.prototype.cancelMuteAll=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.cancelMuteAll(t)},t.prototype.muteUser=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):Array.isArray(t.muteUserList)&&t.muteUserList.length?this.imService.muteUser(t):Promise.reject(new Error("muteUserList must be a non-empty array"))},t.prototype.cancelMuteUser=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):Array.isArray(t.cancelMuteUserList)&&t.cancelMuteUserList.length?this.imService.cancelMuteUser(t):Promise.reject(new Error("cancelMuteUserList must be a non-empty array"))},t.prototype.listMuteUsers=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.listMuteUsers(t)},t}();var Tt=function(){function t(){this.handlerList={}}return t.prototype.emit=function(t,e){var n=this.handlerList[t];if(n)for(var r=0;r<n.length;r++)n[r](e)},t.prototype.on=function(t,e){var n;(null===(n=this.handlerList)||void 0===n?void 0:n.hasOwnProperty(t))||(this.handlerList[t]=[]),this.handlerList[t].push(e)},t.prototype.remove=function(t,e){if(e){var n=this.handlerList[t].findIndex((function(t){return t===e}));n>-1&&(this.handlerList[t].splice(n,1),0===this.handlerList[t].length&&delete this.handlerList[t])}else delete this.handlerList[t]},t.prototype.removeAllEvents=function(){this.handlerList={}},t.prototype.addEventListener=function(t,e){this.emit(t,e)},t}();const jt=Tt;function xt(t){return"string"==typeof t&&!!t}var Mt;!function(t){t.Message="message"}(Mt||(Mt={}));var Ut=function(n){function r(){var t=n.call(this)||this;return t.isLogging=!1,t.isLogged=!1,t.reconnecting=!1,t.actionQueue=new Set,t.authService=At.getAuthService(),t.settingService=At.getSettingService(),t.eventService=At.getEventService(),t.imService=new Nt,t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(r,n),r.create=function(){return new r},Object.defineProperty(r.prototype,"authState",{get:function(){return this.authService.lwpClient.authState},enumerable:!1,configurable:!0}),r.getDeviceId=function(){return At.getAuthService().getDeviceId()},r.prototype.checkConnectionWithTimer=function(){var t=this;this.checkConnectionStatusTimer=setTimeout((function(){4!==t.authState&&t.isLogged&&t.reconnect(),clearTimeout(t.checkConnectionStatusTimer),t.isLogged&&t.checkConnectionWithTimer()}),6e3)},r.prototype.reconnect=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:if(console.log("try reconnect"),this.reconnecting||!this.isLogged)return[2];if(this.isLogging)return[2,Promise.reject(new Error("Is Logging In"))];this.reconnecting=!0,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,this.doAuth(this.authToken)];case 2:return e.sent(),console.log("reconnect success"),[4,this.imService.rejoinGroups()];case 3:return e.sent(),this.reconnecting=!1,this.excuteActionCache(),[3,5];case 4:return t=e.sent(),console.error("reconnect fail",t),this.reconnecting=!1,this.reconnect(),[3,5];case 5:return[2]}}))}))},r.prototype.auth=function(t){if(this.isLogging)return Promise.reject(new Error("Is logining in"));try{var e=function(t){var e=JSON.parse(decodeURIComponent(Array.prototype.map.call(window.atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")));if(!Array.isArray(e.endpoints)||!xt(e.endpoints[0])||!xt(e.token))throw new Error("base64token format error");return e}(t);return this.authToken=e,console.log("AuthTokenObject--\x3e",e),this.doAuth(e)}catch(t){return Promise.reject(new Error("parse token error! "+t.message))}},r.prototype.doAuth=function(t){var e=this;return At.getEventService().unRegister(),this.authService.lwpClient&&this.authService.lwpClient.wsInstance&&this.authService.lwpClient.wsInstance.close(),new Promise((function(n,i){var o={mediaHost:"",appKey:t.appId||"aliyun-interaction-sdk",appName:"aliyun-interaction-sdk",deviceId:r.getDeviceId(),debug:!0,wsUrl:t.endpoints[0],log:{error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error(t)},info:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.info(t)}},authTokenCallback:function(){return Promise.resolve({accessToken:t.token})}};e.settingService.set(o),e.authService.login().then((function(){e.eventService.register((function(t,r){if(t===B.PaaSConnectionChanged)return r===$.CONN_AUTHED?(e.isLogged=!0,n("success"),e.checkConnectionWithTimer()):r===$.CONN_ERROR&&i(new Error("connect fail")),void(e.isLogging=!1);t===B.PaaSAuthStateChanged&&(2===r?i(new Error("auth fail")):0===r&&e.isLogged&&e.reconnect()),t===B.PaaSOtherEvent&&e.handlePaaSOtherEvent(r),"LWPConnectStateChange"===t&&e.isLogged&&!e.reconnecting&&[1,2].includes(r)&&e.reconnect()}))})).catch((function(t){e.isLogged=!1,e.isLogging=!1,i(t)}))}))},r.prototype.handlePaaSOtherEvent=function(t){var n=t.roomId,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["roomId"]),i=e({groupId:n},r);this.emit(Mt.Message,i)},r.prototype.excuteActionCache=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i,u,s,a;return o(this,(function(o){switch(o.label){case 0:if(!this.actionQueue.size)return[3,6];if(!(t=this.actionQueue.values().next().value))return[3,5];e=t.api,n=t.options,r=t.resolve,i=t.reject,(u=t.timer)&&clearTimeout(u),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.imService[e](n)];case 2:return s=o.sent(),r(s),[3,4];case 3:return a=o.sent(),i(a),[3,4];case 4:this.actionQueue.delete(t),o.label=5;case 5:return[3,0];case 6:return[2]}}))}))},r.prototype.excuteApi=function(t,e){var n=this;return this.isLogged?this.reconnecting||0!==this.actionQueue.size?new Promise((function(r,i){var o={resolve:r,reject:i,api:t,options:e};n.actionQueue.add(o);var u=setTimeout((function(){n.actionQueue.delete(o),o.reject(new Error("Services reconnecting"))}),1e4);o.timer=u})):this.imService[t](e):Promise.reject(new Error("Please login first"))},r.prototype.clearActionCache=function(){for(;this.actionQueue.size;){var t=this.actionQueue.values().next().value;t&&(t.timer&&clearTimeout(t.timer),this.actionQueue.delete(t))}},r.prototype.logout=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.isLogged=!1,this.reconnecting=!1,this.clearActionCache(),[4,this.authService.logout()];case 1:return t.sent(),this.authService.lwpClient&&this.authService.lwpClient.wsInstance&&this.authService.lwpClient.wsInstance.close(),At.getEventService().unRegister(),[2]}}))}))},r.prototype.createGroup=function(t){return this.excuteApi("createGroup",t)},r.prototype.getGroup=function(t){return this.excuteApi("getGroup",t)},r.prototype.closeGroup=function(t){return this.excuteApi("closeGroup",t)},r.prototype.joinGroup=function(t){return this.excuteApi("joinGroup",t)},r.prototype.leaveGroup=function(t){return this.isLogged?this.imService.leaveGroup(t):Promise.resolve({})},r.prototype.listGroupUser=function(t){return this.excuteApi("listGroupUser",t)},r.prototype.sendMessageToGroup=function(t){return this.excuteApi("sendMessageToGroup",t)},r.prototype.sendMessageToGroupUsers=function(t){return this.excuteApi("sendMessageToGroupUsers",t)},r.prototype.sendLike=function(t){return this.excuteApi("sendLike",t)},r.prototype.listMessage=function(t){return this.excuteApi("listMessage",t)},r.prototype.getGroupStatistics=function(t){return this.excuteApi("getGroupStatistics",t)},r.prototype.getGroupUserByIdList=function(t){return this.excuteApi("getGroupUserByIdList",t)},r.prototype.muteAll=function(t){return this.excuteApi("muteAll",t)},r.prototype.cancelMuteAll=function(t){return this.excuteApi("cancelMuteAll",t)},r.prototype.muteUser=function(t){return this.excuteApi("muteUser",t)},r.prototype.cancelMuteUser=function(t){return this.excuteApi("cancelMuteUser",t)},r.prototype.listMuteUsers=function(t){return this.excuteApi("listMuteUsers",t)},r}(jt);const kt=Ut;var Rt,Pt;!function(t){t[t.PaaSLikeInfo=1001]="PaaSLikeInfo",t[t.PaaSUserJoin=1002]="PaaSUserJoin",t[t.PaaSUserLeave=1003]="PaaSUserLeave",t[t.PaaSMuteGroup=1004]="PaaSMuteGroup",t[t.PaaSCancelMuteGroup=1005]="PaaSCancelMuteGroup",t[t.PaaSMuteUser=1006]="PaaSMuteUser",t[t.PaaSCancelMuteUser=1007]="PaaSCancelMuteUser"}(Rt||(Rt={})),function(t){t[t.nobody=0]="nobody",t[t.somebody=1]="somebody",t[t.all=2]="all"}(Pt||(Pt={}))})(),r})()));
